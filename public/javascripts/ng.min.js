!function($){"use strict";$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},name;for(name in transEndEventNames){if(el.style[name]!==undefined){return transEndEventNames[name]}}}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);e&&e.preventDefault();$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent());$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.trigger("closed").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");if(!data)$this.data("alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery);!function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state=state+"Text";data.resetText||$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active");this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;if(!data)$this.data("button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.defaults={loadingText:"loading..."};$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle")})}(window.jQuery);!function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(pos>this.$items.length-1||pos<0)return;if(this.sliding){return this.$element.one("slid",function(){that.to(pos)})}if(activeIndex==pos){return this.pause().cycle()}return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){if(!e)this.paused=true;if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle()}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=type=="next"?"first":"last",that=this,e;this.sliding=true;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();e=$.Event("slide",{relatedTarget:$next[0],direction:direction});if($next.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)})}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger("slid")}isCycling&&this.cycle();return this}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option),action=typeof option=="string"?option:options.slide;if(!data)$this.data("carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})};$.fn.carousel.defaults={interval:5e3,pause:"hover"};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex;$target.carousel(options);if(slideIndex=$this.attr("data-slide-to")){$target.data("carousel").pause().to(slideIndex).cycle()}e.preventDefault()})}(window.jQuery);!function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.collapse.defaults,options);if(this.options.parent){this.$parent=$(this.options.parent)}this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning||this.$element.hasClass("in"))return;dimension=this.dimension();scroll=$.camelCase(["scroll",dimension].join("-"));actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("collapse",null)}this.$element[dimension](0);this.transition("addClass",$.Event("show"),"shown");$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning||!this.$element.hasClass("in"))return;dimension=this.dimension();this.reset(this.$element[dimension]());this.transition("removeClass",$.Event("hide"),"hidden");this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth;this.$element[size!==null?"addClass":"removeClass"]("collapse");return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=="show")that.reset();that.transitioning=0;that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;this.transitioning=1;this.$element[method]("in");$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},$.fn.collapse.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})};$.fn.collapse.defaults={toggle:true};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed");$(target).collapse(option)})}(window.jQuery);!function($){"use strict";var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive;if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");clearMenus();if(!isActive){$parent.toggleClass("open")}$this.focus();return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index;if(!/(38|40|27)/.test(e.keyCode))return;$this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27){if(e.which==27)$parent.find(toggle).focus();return $this.click()}$items=$("[role=menu] li:not(.divider):visible a",$parent);if(!$items.length)return;index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus()}};function clearMenus(){$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=selector&&$(selector);if(!$parent||!$parent.length)$parent=$this.parent();return $parent}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");if(!data)$this.data("dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery);!function($){"use strict";var Modal=function(element,options){this.options=options;this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(document.body)}that.$element.show();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length){that.$element.focus()}})},escape:function(){var that=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()})}else if(!this.isShown){this.$element.off("keyup.dismiss.modal")}},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal()})},hideModal:function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()}else if(callback){callback()}}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("modal",data=new Modal(this,options));if(typeof option=="string")data[option]();else if(options.show)data.show()})};$.fn.modal.defaults={backdrop:true,keyboard:true,show:true};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery);!function($){"use strict";var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation){$tip.addClass("fade")}placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else{this.replaceArrow(actualHeight-height,actualHeight,"top")}if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);!function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=(typeof o.content=="function"?o.content.call($e[0]):o.content)||$e.attr("data-content");return content},tip:function(){if(!this.$tip){this.$tip=$(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option=="object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(window.jQuery);!function($){"use strict";function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options);this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process);this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=$("body");this.refresh();this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i)}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])}},activate:function(target){var active,selector;this.activeTarget=target;$(this.selector).parent(".active").removeClass("active");selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;if(!data)$this.data("scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.defaults={offset:10};$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery);!function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active:last a")[0];e=$.Event("show",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;$target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu")){element.closest("li.dropdown").addClass("active")}callback&&callback()}transition?$active.one($.support.transition.end,next):next();$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab("show")})}(window.jQuery);!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.typeahead.defaults,options);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=$(this.options.menu);this.shown=false;this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(val)).change();return this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(event){var items;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source;return items?this.process(items):this},process:function(items){var that=this;items=$.grep(items,function(item){return that.matcher(item)});items=this.sorter(items);if(!items.length){return this.shown?this.hide():this}return this.render(items.slice(0,this.options.items)).show()},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift()){if(!item.toLowerCase().indexOf(this.query.toLowerCase()))beginswith.push(item);else if(~item.indexOf(this.query))caseSensitive.push(item);else caseInsensitive.push(item)}return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})},render:function(items){var that=this;items=$(items).map(function(i,item){i=$(that.options.item).attr("data-value",item);i.find("a").html(that.highlighter(item));return i[0]});items.first().addClass("active");this.$menu.html(items);return this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();if(!next.length){next=$(this.$menu.find("li")[0])}next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),prev=active.prev();if(!prev.length){prev=this.$menu.find("li").last()}prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",$.proxy(this.keydown,this))}this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;if(!isSupported){this.$element.setAttribute(eventName,"return;");isSupported=typeof this.$element[eventName]==="function"}return isSupported},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next();break}e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]);this.move(e)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},focus:function(e){this.focused=true},blur:function(e){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(e){e.stopPropagation();e.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options=typeof option=="object"&&option;if(!data)$this.data("typeahead",data=new Typeahead(this,options));if(typeof option=="string")data[option]()})};$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};
$.fn.typeahead.Constructor=Typeahead;$.fn.typeahead.noConflict=function(){$.fn.typeahead=old;return this};$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data("typeahead"))return;$this.typeahead($this.data())})}(window.jQuery);!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options);this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this));this.$element=$(element);this.checkPosition()};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom",affix;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();affix=this.unpin!=null&&scrollTop+this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;if(this.affixed===affix)return;this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:""))};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options=typeof option=="object"&&option;if(!data)$this.data("affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.defaults={offset:0};$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{};data.offsetBottom&&(data.offset.bottom=data.offsetBottom);data.offsetTop&&(data.offset.top=data.offsetTop);$spy.affix(data)})})}(window.jQuery);(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:7,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn)}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector})}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut})}var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.abs(pX-cX)+Math.abs(pY-cY)<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector)}})(jQuery);window.Modernizr=function(window,document,undefined){var version="2.6.2",Modernizr={},enableClasses=true,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10)){while(nodes--){node=document.createElement("div");node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node)}}style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join("");div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background="";fakeBody.style.overflow="hidden";docOverflow=docElement.style.overflow;docElement.style.overflow="hidden";docElement.appendChild(fakeBody)}ret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow}else{div.parentNode.removeChild(div)}return!!ret},isEventSupported=function(){var TAGNAMES={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function isEventSupported(eventName,element){element=element||document.createElement(TAGNAMES[eventName]||"div");eventName="on"+eventName;var isSupported=eventName in element;if(!isSupported){if(!element.setAttribute){element=document.createElement("div")}if(element.setAttribute&&element.removeAttribute){element.setAttribute(eventName,"");isSupported=is(element[eventName],"function");if(!is(element[eventName],"undefined")){element[eventName]=undefined}element.removeAttribute(eventName)}}element=null;return isSupported}return isEventSupported}(),_hasOwnProperty={}.hasOwnProperty,hasOwnProp;if(!is(_hasOwnProperty,"undefined")&&!is(_hasOwnProperty.call,"undefined")){hasOwnProp=function(object,property){return _hasOwnProperty.call(object,property)}}else{hasOwnProp=function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}}if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError}var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F;var result=target.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return self}else{return target.apply(that,args.concat(slice.call(arguments)))}};return bound}}function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined){return prefixed=="pfx"?prop:true}}return false}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined){if(elem===false)return props[i];if(is(item,"function")){return item.bind(elem||obj)}return item}}return false}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");if(is(prefixed,"string")||is(prefixed,"undefined")){return testProps(props,prefixed)}else{props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" ");return testDOMProps(props,prefixed,elem)}}tests["localstorage"]=function(){try{localStorage.setItem(mod,mod);localStorage.removeItem(mod);return true}catch(e){return false}};for(var feature in tests){if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?"":"no-")+featureName)}}Modernizr.addTest=function(feature,test){if(typeof feature=="object"){for(var key in feature){if(hasOwnProp(feature,key)){Modernizr.addTest(key,feature[key])}}}else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined){return Modernizr}test=typeof test=="function"?test():test;if(typeof enableClasses!=="undefined"&&enableClasses){docElement.className+=" "+(test?"":"no-")+feature}Modernizr[feature]=test}return Modernizr};setCss("");modElem=inputElem=null;(function(window,document){var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando="_html5shiv";var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>";supportsHtml5Styles="hidden"in a;supportsUnknownElements=a.childNodes.length==1||function(){document.createElement("a");var frag=document.createDocumentFragment();return typeof frag.cloneNode=="undefined"||typeof frag.createDocumentFragment=="undefined"||typeof frag.createElement=="undefined"}()}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true}})();function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;p.innerHTML="x<style>"+cssText+"</style>";return parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return typeof elements=="string"?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data}return data}function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createElement(nodeName)}if(!data){data=getExpandoData(ownerDocument)}var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode()}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode()}else{node=data.createElem(nodeName)}return node.canHaveChildren&&!reSkip.test(nodeName)?data.frag.appendChild(node):node}function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createDocumentFragment()}data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i])}return clone}function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag()}ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName)}return createElement(nodeName,ownerDocument,data)};ownerDocument.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+getElements().join().replace(/\w+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document}var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}"+"mark{background:#FF0;color:#000}")}if(!supportsUnknownElements){shivMethods(ownerDocument,data)}return ownerDocument}var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:options.shivCSS!==false,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==false,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5;shivDocument(document)})(this,document);Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.hasEvent=isEventSupported;Modernizr.testProp=function(prop){return testProps([prop])};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;Modernizr.prefixed=function(prop,obj,elem){if(!obj){return testPropsAll(prop,"pfx")}else{return testPropsAll(prop,obj,elem)}};docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):"");return Modernizr}(this,this.document);(function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(){var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};block.bullet=/(?:[*+-]|\d+\.)/;block.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;block.item=replace(block.item,"gm")(/bull/g,block.bullet)();block.list=replace(block.list)(/bull/g,block.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)();block._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b";block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)();block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)();block.normal=merge({},block);block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|")();block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function Lexer(options){this.tokens=[];this.tokens.links={};this.options=options||marked.defaults;this.rules=block.normal;if(this.options.gfm){if(this.options.tables){this.rules=block.tables}else{this.rules=block.gfm}}}Lexer.rules=block;Lexer.lex=function(src,options){var lexer=new Lexer(options);return lexer.lex(src)};Lexer.prototype.lex=function(src){src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(src,true)};Lexer.prototype.token=function(src,top){var src=src.replace(/^ +$/gm,""),next,loose,cap,bull,b,item,space,i,l;while(src){if(cap=this.rules.newline.exec(src)){src=src.substring(cap[0].length);if(cap[0].length>1){this.tokens.push({type:"space"})}}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);cap=cap[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:!this.options.pedantic?cap.replace(/\n+$/,""):cap});continue}if(cap=this.rules.fences.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"code",lang:cap[2],text:cap[3]});continue}if(cap=this.rules.heading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[1].length,text:cap[2]});continue}if(top&&(cap=this.rules.nptable.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].split(/ *\| */)}this.tokens.push(item);continue}if(cap=this.rules.lheading.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"heading",depth:cap[2]==="="?1:2,text:cap[1]});continue}if(cap=this.rules.hr.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"hr"});continue}if(cap=this.rules.blockquote.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"blockquote_start"});cap=cap[0].replace(/^ *> ?/gm,"");this.token(cap,top);this.tokens.push({type:"blockquote_end"});continue}if(cap=this.rules.list.exec(src)){src=src.substring(cap[0].length);bull=cap[2];this.tokens.push({type:"list_start",ordered:bull.length>1});cap=cap[0].match(this.rules.item);next=false;l=cap.length;i=0;for(;i<l;i++){item=cap[i];space=item.length;item=item.replace(/^ *([*+-]|\d+\.) +/,"");if(~item.indexOf("\n ")){space-=item.length;item=!this.options.pedantic?item.replace(new RegExp("^ {1,"+space+"}","gm"),""):item.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&i!==l-1){b=block.bullet.exec(cap[i+1])[0];if(bull!==b&&!(bull.length>1&&b.length>1)){src=cap.slice(i+1).join("\n")+src;i=l-1}}loose=next||/\n\n(?!\s*$)/.test(item);if(i!==l-1){next=item[item.length-1]==="\n";if(!loose)loose=next}this.tokens.push({type:loose?"loose_item_start":"list_item_start"});this.token(item,false);this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"});continue}if(cap=this.rules.html.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:cap[1]==="pre",text:cap[0]});continue}if(top&&(cap=this.rules.def.exec(src))){src=src.substring(cap[0].length);this.tokens.links[cap[1].toLowerCase()]={href:cap[2],title:cap[3]};continue}if(top&&(cap=this.rules.table.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(item);continue}if(top&&(cap=this.rules.paragraph.exec(src))){src=src.substring(cap[0].length);this.tokens.push({type:"paragraph",text:cap[1][cap[1].length-1]==="\n"?cap[1].slice(0,-1):cap[1]});continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);this.tokens.push({type:"text",text:cap[0]});continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};inline._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/;inline._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)();inline.reflink=replace(inline.reflink)("inside",inline._inside)();inline.normal=merge({},inline);inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()});inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()});function InlineLexer(links,options){this.options=options||marked.defaults;this.links=links;this.rules=inline.normal;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=inline.breaks}else{this.rules=inline.gfm}}else if(this.options.pedantic){this.rules=inline.pedantic}}InlineLexer.rules=inline;InlineLexer.output=function(src,links,options){var inline=new InlineLexer(links,options);return inline.output(src)};InlineLexer.prototype.output=function(src){var out="",link,text,href,cap;while(src){if(cap=this.rules.escape.exec(src)){src=src.substring(cap[0].length);out+=cap[1];continue}if(cap=this.rules.autolink.exec(src)){src=src.substring(cap[0].length);if(cap[2]==="@"){text=cap[1][6]===":"?this.mangle(cap[1].substring(7)):this.mangle(cap[1]);href=this.mangle("mailto:")+text}else{text=escape(cap[1]);href=text}out+='<a href="'+href+'">'+text+"</a>";continue}if(cap=this.rules.url.exec(src)){src=src.substring(cap[0].length);text=escape(cap[1]);href=text;out+='<a href="'+href+'">'+text+"</a>";continue}if(cap=this.rules.tag.exec(src)){src=src.substring(cap[0].length);out+=this.options.sanitize?escape(cap[0]):cap[0];continue}if(cap=this.rules.link.exec(src)){src=src.substring(cap[0].length);out+=this.outputLink(cap,{href:cap[2],title:cap[3]});continue}if((cap=this.rules.reflink.exec(src))||(cap=this.rules.nolink.exec(src))){src=src.substring(cap[0].length);link=(cap[2]||cap[1]).replace(/\s+/g," ");link=this.links[link.toLowerCase()];if(!link||!link.href){out+=cap[0][0];src=cap[0].substring(1)+src;continue}out+=this.outputLink(cap,link);continue}if(cap=this.rules.strong.exec(src)){src=src.substring(cap[0].length);out+="<strong>"+this.output(cap[2]||cap[1])+"</strong>";continue}if(cap=this.rules.em.exec(src)){src=src.substring(cap[0].length);out+="<em>"+this.output(cap[2]||cap[1])+"</em>";continue}if(cap=this.rules.code.exec(src)){src=src.substring(cap[0].length);out+="<code>"+escape(cap[2],true)+"</code>";continue}if(cap=this.rules.br.exec(src)){src=src.substring(cap[0].length);out+="<br>";continue}if(cap=this.rules.del.exec(src)){src=src.substring(cap[0].length);out+="<del>"+this.output(cap[1])+"</del>";continue}if(cap=this.rules.text.exec(src)){src=src.substring(cap[0].length);out+=escape(cap[0]);continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return out};InlineLexer.prototype.outputLink=function(cap,link){if(cap[0][0]!=="!"){return'<a href="'+escape(link.href)+'"'+(link.title?' title="'+escape(link.title)+'"':"")+">"+this.output(cap[1])+"</a>"}else{return'<img class="img-polaroid" src="'+escape(link.href)+'" alt="'+escape(cap[1])+'"'+(link.title?' title="'+escape(link.title)+'"':"")+">"}};InlineLexer.prototype.mangle=function(text){var out="",l=text.length,i=0,ch;for(;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>.5){ch="x"+ch.toString(16)}out+="&#"+ch+";"}return out};function Parser(options){this.tokens=[];this.token=null;this.options=options||marked.defaults}Parser.parse=function(src,options){var parser=new Parser(options);return parser.parse(src)};Parser.prototype.parse=function(src){this.inline=new InlineLexer(src.links,this.options);this.tokens=src.reverse();var out="";while(this.next()){out+=this.tok()}return out};Parser.prototype.next=function(){return this.token=this.tokens.pop()};Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};Parser.prototype.parseText=function(){var body=this.token.text;while(this.peek().type==="text"){body+="\n"+this.next().text}return this.inline.output(body)};Parser.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return"<hr>\n"}case"heading":{return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n"}case"code":{if(this.options.highlight){var code=this.options.highlight(this.token.text,this.token.lang);if(code!=null&&code!==this.token.text){this.token.escaped=true;this.token.text=code}}if(!this.token.escaped){this.token.text=escape(this.token.text,true)}return"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n"}case"table":{var body="",heading,i,row,cell,j;body+="<thead>\n<tr>\n";for(i=0;i<this.token.header.length;i++){heading=this.inline.output(this.token.header[i]);body+=this.token.align[i]?'<th align="'+this.token.align[i]+'">'+heading+"</th>\n":"<th>"+heading+"</th>\n"}body+="</tr>\n</thead>\n";body+="<tbody>\n";for(i=0;i<this.token.cells.length;i++){row=this.token.cells[i];body+="<tr>\n";for(j=0;j<row.length;j++){cell=this.inline.output(row[j]);body+=this.token.align[j]?'<td align="'+this.token.align[j]+'">'+cell+"</td>\n":"<td>"+cell+"</td>\n"}body+="</tr>\n"}body+="</tbody>\n";return"<table>\n"+body+"</table>\n"}case"blockquote_start":{var body="";while(this.next().type!=="blockquote_end"){body+=this.tok()}return"<blockquote>\n"+body+"</blockquote>\n"}case"list_start":{var type=this.token.ordered?"ol":"ul",body="";while(this.next().type!=="list_end"){body+=this.tok()}return"<"+type+">\n"+body+"</"+type+">\n"}case"list_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.token.type==="text"?this.parseText():this.tok()}return"<li>"+body+"</li>\n"}case"loose_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this.tok()}return"<li>"+body+"</li>\n"}case"html":{return!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text}case"paragraph":{return"<p>"+this.inline.output(this.token.text)+"</p>\n"}case"text":{return"<p>"+this.parseText()+"</p>\n"}}};function escape(html,encode){return html.replace(!encode?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function replace(regex,opt){regex=regex.source;opt=opt||"";return function self(name,val){if(!name)return new RegExp(regex,opt);val=val.source||val;val=val.replace(/(^|[^\[])\^/g,"$1");regex=regex.replace(name,val);return self}}function noop(){}noop.exec=noop;function merge(obj){var i=1,target,key;for(;i<arguments.length;i++){target=arguments[i];for(key in target){if(Object.prototype.hasOwnProperty.call(target,key)){obj[key]=target[key]}}}return obj}function marked(src,opt){try{if(opt)opt=merge({},marked.defaults,opt);return Parser.parse(Lexer.lex(src,opt),opt)}catch(e){e.message+="\nPlease report this to https://github.com/chjj/marked.";if((opt||marked.defaults).silent){return"<p>An error occured:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}}marked.options=marked.setOptions=function(opt){merge(marked.defaults,opt);return marked};marked.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,smartLists:false,silent:false,highlight:null,langPrefix:"lang-"};marked.Parser=Parser;marked.parser=Parser.parse;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.InlineLexer=InlineLexer;marked.inlineLexer=InlineLexer.output;marked.parse=marked;if(typeof exports==="object"){module.exports=marked}else if(typeof define==="function"&&define.amd){define(function(){return marked})}else{this.marked=marked}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());var KEYCODE_ESC=27;var KEYCODE_ENTER=13;var KEYCODE_TAB=9;var KEYCODE_BACKSPACE=8;var KEYCODE_M=77;var KEYCODE_S=83;$(document).ready(function(){var ngw=window.ngw||(window.ngw={isFooterScreenOn:false,isPreviewOn:false,screen:"none",openScreen:"none",isSoundOn:localStorage.getItem("isSoundOn")=="false"?false:true});var input=$("#input");ngw.key=[document.getElementById("key1"),document.getElementById("key2"),document.getElementById("key3"),document.getElementById("key4")];ngw.backspace=[document.getElementById("backspace1"),document.getElementById("backspace2"),document.getElementById("backspace3"),document.getElementById("backspace4")];ngw.enter=[document.getElementById("enter1"),document.getElementById("enter2"),document.getElementById("enter3"),document.getElementById("enter4"),document.getElementById("enter5")];if(navigator.appName=="Microsoft Internet Explorer"){input.mousemove(function(e){var footer=$("#footer");
if(e.pageY<40){footer.css("top","0px");$(".progress.progress-striped.active").css("top","40px")}else{footer.css("top","-40px");$(".nav-collapse").collapse("hide");$(".progress.progress-striped.active").css("top","0px")}})}if(!localStorage.getItem("firstTime"))$("#input").one("change",function(){localStorage.setItem("firstTime","false");footer.css("top","-40px");$(".nav-collapse").collapse("hide")});footerTriggerInit();settingsTriggerInit();if(localStorage.getItem("font")||localStorage.getItem("fontSize")){$(".text").css("font-family",localStorage.getItem("font"));if(localStorage.getItem("fontSize")){$("#font-size").val(localStorage.getItem("fontSize"));ngw.fontSize=16}else{ngw.fontSize=16;localStorage.setItem("fontSize","16")}changeFontSize()}if(!ngw.isSoundOn)$("#soundToggle").removeClass("down").html("Sound Off");if(Modernizr.localstorage&&localStorage.getItem("text")){var savedText="";try{savedText=localStorage.getItem("text")}catch(e){}if(savedText){$("#input").val(savedText);savedText=savedText.replace(/(^\s*)|(\s*$)/gi,"");savedText=savedText.replace(/[ ]{2,}/gi," ");savedText=savedText.replace(/\n /,"\n")}}try{if(localStorage.getItem("firstTime")==="false")setInterval(function(){localStorage.setItem("text",$("#input").val())},2e3)}catch(e){console.log("Could not save.")}$.fn.selectRange=function(start,end){return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end)}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select()}})};function setCaretToPos(input,pos){setSelectionRange(input,pos,pos)}function updateBox(wikipediaPage,box,pos,curval){if(wikipediaPage===""||!!/[0-9\*\#\-]/i.test(wikipediaPage.charAt(0))||wikipediaPage==="?"||wikipediaPage==="!"){return false}if(wikipediaPage.charAt(0)=="?"&&wikipediaPage!=="?"){showParsingBar();var jqxhr=$.getJSON("http://api.duckduckgo.com/?q=define+"+wikipediaPage.substring(1)+"&format=json&pretty=1&callback=?&",function(){}).done(function(data){text=data.Abstract;try{if(data.AbstractSource==="Merriam-Webster"&&text.indexOf("definition:")>-1){text=text.substring(text.indexOf("definition:")+12)}else if(data.AbstractSource==="The Free Dictionary"&&text.indexOf("·")>-1){temptext=text.substring(text.lastIndexOf("·"));text=temptext.substring(temptext.indexOf(" ")+1)}if(text==="")throw"blank page";var actval=String(box.val());var extratextlen=actval.indexOf("\n",pos)-pos;var newval=actval.substring(pos,extratextlen);box.val(curval.substring(0,pos)+"\n\n> "+text+"\n\n"+actval.substring(pos+1));var offsetSelect=actval.length-curval.length;var selectpos=pos+text.length+5+offsetSelect;$(box).selectRange(selectpos,selectpos);if(text==="")hideParsingBar("error");else{hideParsingBar("success");if(ngw.isSoundOn)playSound("enter")}}catch(err){var actval=String(box.val());box.val(curval.substring(0,pos)+actval.substring(pos));var offset=actval.length-curval.length;$(box).selectRange(pos+offset,pos+offset);hideParsingBar("error")}}).error(function(){hideParsingBar("error")});return}showParsingBar();var req1=$.ajax({type:"GET",dataType:"json",url:"//en.wikipedia.org/w/api.php?action=parse&format=json&section=0&prop=text&callback=?&redirects=",data:{page:wikipediaPage,uselang:"en"},async:false,error:function(){hideParsingBar("error")},success:function(json,wikipediaPage){try{var text=json.parse.text["*"];var n=text.indexOf("/table>");while(n!=-1){if(n>-1){text=text.substring(n+8)}n=text.indexOf("/table>")}text=text.substring(text.indexOf("<p>")+3);text=text.substring(0,text.indexOf("</p>"));var tags=/(<([^>]+)>)/gi;text=text.replace(tags,"");if(text.length>3&&text.substring(text.length-3)=="to:"){throw"disambiguation"}var citations=/(\[([^\]]+)\])/gi;text=text.replace(citations,"");text=text.replace(/&#160;/g,"");if(text.indexOf("Cite error:")>-1)text=text.substring(0,text.indexOf("Cite error:"));var firstParen=text.substring(0,15).indexOf("(");if(firstParen>-1){var parenCount=1;var curPos=firstParen+1;while(parenCount>0&&curPos<text.length){if(text.charAt(curPos)==")")parenCount-=1;if(text.charAt(curPos)=="(")parenCount+=1;curPos+=1}text=text.substring(0,firstParen)+text.substring(curPos+1)}text=text.replace(/^\s+|\s+$/g,"");if(text==="")throw"blank page";var actval=String(box.val());var extratextlen=actval.indexOf("\n",pos)-pos;var newval=actval.substring(pos,extratextlen);box.val(curval.substring(0,pos)+"\n\n> "+text+"\n\n"+actval.substring(pos+1));var offsetSelect=actval.length-curval.length;var selectpos=pos+text.length+5+offsetSelect;$(box).selectRange(selectpos,selectpos);if(text==="")hideParsingBar("error");else hideParsingBar("success")}catch(err){var actval=String(box.val());box.val(curval.substring(0,pos)+actval.substring(pos));var offset=actval.length-curval.length;$(box).selectRange(pos+offset,pos+offset);hideParsingBar("error")}}})}$("#input").on("keydown",function(e){if(e.keyCode==KEYCODE_TAB){e.preventDefault();if(ngw.isSoundOn)playSound("key");var value=$(this).val();pos=$(this).prop("selectionStart");$(this).val(value.substring(0,pos)+"	"+value.substring(pos));$(this).selectRange(pos+1,pos+1)}else if(e.keyCode==KEYCODE_S&&e.ctrlKey){e.preventDefault()}else if(e.keyCode==KEYCODE_BACKSPACE&&ngw.isSoundOn){playSound("backspace")}});$("#input").on("keypress",function(e){if(e.keyCode==KEYCODE_ENTER&&e.shiftKey){if(ngw.isSoundOn)playSound("enter");var value=$(this).val();pos=$(this).prop("selectionStart");var endLine=value.substring(0,pos).lastIndexOf("\n");if(endLine==-1)endLine=value.lastIndexOf("\n");$(this).val(value.substring(0,pos)+"\n"+value.substring(pos));$(this).selectRange(pos+1,pos+1);updateBox(value.substring(endLine+1,pos),$(this),pos,value);return false}else if(e.keyCode==KEYCODE_ENTER&&ngw.isSoundOn){playSound("enter")}else if(e.keyCode==KEYCODE_S&&e.ctrlKey){localStorage.setItem("text",$("#input").val())}else if(ngw.isSoundOn)playSound("key")});$(document).on("keydown",function(e){if(e.keyCode==KEYCODE_M&&e.ctrlKey){togglePreviewMode();e.preventDefault();return false}});$("#markdownMode").on("click",function(e){togglePreviewMode();e.preventDefault()});$("#soundToggle").click(function(){if($(this).hasClass("down")){$(this).removeClass("down");$(this).html("Sounds Off");ngw.isSoundOn=false}else{$(this).addClass("down");$(this).html("Sounds On");ngw.isSoundOn=true}localStorage.setItem("isSoundOn",ngw.isSoundOn)});$(".font-btn").on("click",function(e){$(".text").css("font-family",$(this).data("font"));localStorage.setItem("font",$(this).data("font"))});$("#font-size").on("change",function(e){changeFontSize(e)});$("#font-size").on("keydown",function(e){if(e.keyCode==KEYCODE_ENTER){e.preventDefault();changeFontSize(e);return false}});$("[id$='Screen']").fadeOut();$(".footerScreenTrigger").on("click",function(e){ngw.screen=e.target.getAttribute("data-target");if(!ngw.isFooterScreenOn){$("#"+e.currentTarget.id).addClass("active");ngw.isFooterScreenOn=true;ngw.openScreen=ngw.screen;$("#footer").css("height","100%");$("#"+ngw.screen).fadeIn();$("#closeScreen").fadeIn()}else if(ngw.screen===ngw.openScreen){closeAll()}else{$("a.active").removeClass("active");$("a.active").blur();$("#"+e.currentTarget.id).addClass("active");$("#"+ngw.openScreen).fadeOut();$("#"+ngw.screen).fadeIn();ngw.openScreen=ngw.screen}e.preventDefault()});$(document).on("keydown",function(e){if(e.keyCode==KEYCODE_ESC){closeAll()}});$("#closeScreen").on("click",function(e){closeAll()});try{setInterval(function(){if($(".progress"))$(".progress").fadeOut()},5e3)}catch(e){console.log("failed")}var tutorial='(Refresh to skip tutorial)\n\n###NoteGenie 101\nThe first note-taking app that writes descriptions of unfamiliar terms for you. To use NoteGenie, take notes like you normally would, but when you want to look up an unfamiliar term, type it in a new line and then press SHIFT + ENTER. Like this,\n\nDiscrete Mathematics\n\n> Discrete mathematics is the study of mathematical structures that are fundamentally discrete rather than continuous. In contrast to real numbers that have the property of varying "smoothly", the objects studied in discrete mathematics – such as integers, graphs, and statements in logic – do not vary smoothly in this way, but have distinct, separated values. Discrete mathematics therefore excludes topics in "continuous mathematics" such as calculus and analysis. Discrete objects can often be enumerated by integers. \n\n####Formatting\n- To take bulleted notes, put a dash before each line.\n	- You can indent bullets.\n- To create a heading, put hash symbols at the beginning of a line. \n	- 1 hash = biggest heading. 6 hashes = smallest heading.\n- To bold, surround text in **two** asterisks. \n- To italicize, surround text in *one* asterisk.\n---\n1. To create numbered bullets, type in a number and a period before each line.\n2. To insert links, use this format: [NoteGenie](http://notegenie.io)\n3. To insert images, use this format: \n\n![Flight](http://notegenie.io/images/flight-cover.jpg)\n\nWhen you\'re done press **CTRL + M** to see a formatted version of your notes with links and images& and press **CTRL + M** to go back into editing mode.\n\n####Saving Notes\n1. Login\n2. Type in a name in the navbar file name field\n3. Press "Save"\n\n####Loading Notes\n1. Press "Files"\n2. Click the file you want to open\n	- Note: NoteGenie only accesses files under Apps/NoteGenie/ in your Dropbox storage.\n\nThat\'s all. Try it out today!';$(".tutorial").on("click",function(){ngw.setupAlert(function(){ngw.clearTextarea(null,null,function(){autoType(tutorial,$("#input"))})},"Run Tutorial",null,"Are you sure you want to run the tutorial without saving your current notes first?");clearInterval(ngw.interval);$('[id="alertBox"]').fadeIn()});if(localStorage.getItem("firstTime")!="false"){localStorage.setItem("firstTime","false");autoType(tutorial,$("#input"))}});function footerTriggerInit(){var footer=$("#footer");setTimeout(function(){$("#input").one("keypress",function(){if(!ngw.isFooterScreenOn){footer.css("top","-40px");$(".nav-collapse").collapse("hide");$(".progress.progress-striped.active").css("top","0px");$(".dropdown").removeClass("open")}})},4e3);$("#footer-trigger").hoverIntent({over:function(){footer.css("top","0px");$(".progress.progress-striped.active").css("top","40px")},out:function(){if(!ngw.isFooterScreenOn){footer.css("top","-40px");$(".nav-collapse").collapse("hide");$(".progress.progress-striped.active").css("top","0px");$(".dropdown").removeClass("open")}},timeout:1e3})}function settingsTriggerInit(){var settings=$("#settings");$("#settingsTrigger").hoverIntent({over:function(){settings.dropdown()},out:function(){settings.dropdown()},timeout:1e3})}function closeAll(){$("[id$='Screen']").fadeOut();$(".nav-collapse").collapse("hide");$('[id="alertBox"]').fadeOut();$("#footer").removeAttr("style");$("#preview").css("opacity",0);$("#preview").css("visibility","hidden");$("body, html").css("background","");$("a.active").removeClass("active");ngw.screen=ngw.openScreen="none";ngw.isFooterScreenOn=false;ngw.isPreviewOn=false;footerTriggerInit()}function showParsingBar(){$("body").prepend('<div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div>');if($("#footer").css("top")==="0px")$(".progress").css("top","40px")}function hideParsingBar(type){if(type=="success"){$(".progress:first").addClass("progress-success").delay(800).fadeOut()}else if(type=="error"){$(".progress:first").addClass("progress-danger").delay(800).fadeOut()}else{$(".progress:first").delay(800).fadeOut()}$('.progress[style$="display: none;"]').remove()}function togglePreviewMode(){var preview=$("#preview");if(!ngw.isPreviewOn){var texttouse=$("#input").val();var notlist=/^(?!(([\t ]*[0-9]+\. [^\n]*[\n]))|(([\t ]*[\-+\*][ ][^\n]*[\n])))([^\n]*?(\n))/gm;texttouse=texttouse.replace(notlist,"$5\n");var tokens=marked.lexer(texttouse);preview.html(marked.parser(tokens));preview.css("opacity",1);preview.css("visibility","visible");$("body, html").css("background","white");$("#markdownMode").addClass("active");ngw.isPreviewOn=true;$("#input").blur()}else{preview.css("opacity",0);preview.css("visibility","hidden");$("body, html").css("background","");$("#markdownMode").removeClass("active");ngw.isPreviewOn=false;$("#input").focus()}}function changeFontSize(e){var newSize=$("#font-size").val();var sizeChange=newSize-ngw.fontSize;$(".text").css("font-size","+="+sizeChange);$("#input, #preview, .text").find("body, h6, h5, h4, h3, h2, h1, blockquote").css("font-size","+="+sizeChange);ngw.fontSize=newSize;localStorage.setItem("fontSize",newSize)}function autoType(text,input){var textArray=text.split("");var rand=50;var i=0;function frameLooper(textArray){if(textArray.length>0){if(textArray[0]=="\n"&&ngw.isSoundOn)playSound("enter");else if(ngw.isSoundOn)playSound("key");$("#input").val($("#input").val()+textArray.shift());if(textArray[0]===">")while(textArray[0]!="\n")$("#input").val($("#input").val()+textArray.shift());if(textArray[0]==="&"){clearInterval(ngw.interval);togglePreviewMode();ngw.interval=setTimeout(function(){togglePreviewMode();ngw.interval=setInterval(function(){frameLooper(textArray)},rand)},3e3);textArray.shift()}else if(i%20===0){rand=Math.random()*120;clearInterval(ngw.interval);ngw.interval=setInterval(function(){frameLooper(textArray)},rand)}}else{clearInterval(ngw.interval);togglePreviewMode()}}input.val("");ngw.interval=setInterval(function(){frameLooper(textArray)},rand)}var keyNum=0;var backspaceNum=0;var enterNum=0;function playSound(type){if(type==="key"){if(keyNum>3)keyNum=0;ngw.key[keyNum].volume=Math.random()*.3;ngw.key[keyNum].play();keyNum++}else if(type==="enter"){if(enterNum>4)enterNum=0;ngw.enter[enterNum].volume=.5+Math.random()*.5;ngw.enter[enterNum].play();enterNum++}else if(type==="backspace"){if(backspaceNum>3)backspaceNum=0;ngw.backspace[backspaceNum].volume=.5+Math.random()*.5;ngw.backspace[backspaceNum].play();backspaceNum++}}(function(){var Dropbox,DropboxChromeOnMessage,DropboxChromeSendMessage,DropboxClient,DropboxXhrArrayBufferView,DropboxXhrCanSendForms,DropboxXhrDoesPreflight,DropboxXhrIeMode,DropboxXhrRequest,DropboxXhrSendArrayBufferView,add32,arrayToBase64,atob,atobNibble,base64Digits,base64HmacSha1,base64Sha1,btoa,btoaNibble,crypto,dropboxEncodeKey,hmacSha1,name,rotateLeft32,sha1,stringToArray,value,_base64Digits,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Dropbox=function(){return null};Dropbox.Util={};Dropbox.EventSource=function(){function EventSource(options){this._cancelable=options&&options.cancelable;this._listeners=[]}EventSource.prototype.addListener=function(listener){if(typeof listener!=="function"){throw new TypeError("Invalid listener type; expected function")}if(__indexOf.call(this._listeners,listener)<0){this._listeners.push(listener)}return this};EventSource.prototype.removeListener=function(listener){var i,index,subscriber,_i,_len,_ref;if(this._listeners.indexOf){index=this._listeners.indexOf(listener);if(index!==-1){this._listeners.splice(index,1)}}else{_ref=this._listeners;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){subscriber=_ref[i];if(subscriber===listener){this._listeners.splice(i,1);break}}}return this};EventSource.prototype.dispatch=function(event){var listener,returnValue,_i,_len,_ref;_ref=this._listeners;for(_i=0,_len=_ref.length;_i<_len;_i++){listener=_ref[_i];returnValue=listener(event);if(this._cancelable&&returnValue===false){return false}}return true};return EventSource}();Dropbox.ApiError=function(){ApiError.prototype.status=void 0;ApiError.prototype.method=void 0;ApiError.prototype.url=void 0;ApiError.prototype.responseText=void 0;ApiError.prototype.response=void 0;ApiError.NETWORK_ERROR=0;ApiError.INVALID_PARAM=400;ApiError.INVALID_TOKEN=401;ApiError.OAUTH_ERROR=403;ApiError.NOT_FOUND=404;ApiError.INVALID_METHOD=405;ApiError.RATE_LIMITED=503;ApiError.OVER_QUOTA=507;function ApiError(xhr,method,url){var text;this.method=method;this.url=url;this.status=xhr.status;if(xhr.responseType){try{text=xhr.response||xhr.responseText}catch(xhrError){try{text=xhr.responseText}catch(xhrError){text=null}}}else{try{text=xhr.responseText}catch(xhrError){text=null}}if(text){try{this.responseText=text.toString();this.response=JSON.parse(text)}catch(xhrError){this.response=null}}else{this.responseText="(no response)";this.response=null}}ApiError.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText};ApiError.prototype.inspect=function(){return this.toString()};return ApiError}();Dropbox.AuthDriver=function(){function AuthDriver(){}AuthDriver.prototype.url=function(token){return"https://some.url?dboauth_token="+Dropbox.Xhr.urlEncode(token)};AuthDriver.prototype.doAuthorize=function(authUrl,token,tokenSecret,callback){return callback("oauth-token")};AuthDriver.prototype.onAuthStateChange=function(client,callback){return callback()};return AuthDriver}();Dropbox.Drivers={};if(typeof window!=="undefined"){if(window.atob&&window.btoa){atob=function(string){return window.atob(string)};btoa=function(base64){return window.btoa(base64)}}else{base64Digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";btoaNibble=function(accumulator,bytes,result){var i,limit;limit=3-bytes;accumulator<<=limit*8;i=3;while(i>=limit){result.push(base64Digits.charAt(accumulator>>i*6&63));i-=1}i=bytes;while(i<3){result.push("=");i+=1}return null};atobNibble=function(accumulator,digits,result){var i,limit;limit=4-digits;accumulator<<=limit*6;i=2;while(i>=limit){result.push(String.fromCharCode(accumulator>>8*i&255));i-=1}return null};btoa=function(string){var accumulator,bytes,i,result,_i,_ref;result=[];accumulator=0;bytes=0;for(i=_i=0,_ref=string.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){accumulator=accumulator<<8|string.charCodeAt(i);bytes+=1;if(bytes===3){btoaNibble(accumulator,bytes,result);accumulator=bytes=0}}if(bytes>0){btoaNibble(accumulator,bytes,result)}return result.join("")};atob=function(base64){var accumulator,digit,digits,i,result,_i,_ref;result=[];accumulator=0;digits=0;for(i=_i=0,_ref=base64.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){digit=base64.charAt(i);if(digit==="="){break}accumulator=accumulator<<6|base64Digits.indexOf(digit);digits+=1;if(digits===4){atobNibble(accumulator,digits,result);accumulator=digits=0}}if(digits>0){atobNibble(accumulator,digits,result)}return result.join("")}}}else{atob=function(arg){var buffer,i;buffer=new Buffer(arg,"base64");return function(){var _i,_ref,_results;_results=[];for(i=_i=0,_ref=buffer.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){_results.push(String.fromCharCode(buffer[i]))}return _results}().join("")};btoa=function(arg){var buffer,i;buffer=new Buffer(function(){var _i,_ref,_results;_results=[];for(i=_i=0,_ref=arg.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){_results.push(arg.charCodeAt(i))}return _results}());return buffer.toString("base64")}}Dropbox.Util.atob=atob;Dropbox.Util.btoa=btoa;Dropbox.Client=function(){function Client(options){var _this=this;this.sandbox=options.sandbox||false;this.apiServer=options.server||this.defaultApiServer();this.authServer=options.authServer||this.defaultAuthServer();this.fileServer=options.fileServer||this.defaultFileServer();this.downloadServer=options.downloadServer||this.defaultDownloadServer();this.onXhr=new Dropbox.EventSource({cancelable:true});this.onError=new Dropbox.EventSource;this.onAuthStateChange=new Dropbox.EventSource;this.xhrOnErrorHandler=function(error,callback){return _this.handleXhrError(error,callback)};this.oauth=new Dropbox.Oauth(options);this.driver=null;this.filter=null;this.uid=null;this.authState=null;this.authError=null;this._credentials=null;this.setCredentials(options);this.setupUrls()}Client.prototype.authDriver=function(driver){this.driver=driver;return this};Client.prototype.onXhr=null;Client.prototype.onError=null;Client.prototype.onAuthStateChange=null;Client.prototype.dropboxUid=function(){return this.uid};Client.prototype.credentials=function(){if(!this._credentials){this.computeCredentials()}return this._credentials};Client.prototype.authenticate=function(options,callback){var interactive,oldAuthState,_fsmStep,_this=this;if(!callback&&typeof options==="function"){callback=options;options=null}if(options&&"interactive"in options){interactive=options.interactive}else{interactive=true}if(!(this.driver||this.authState===DropboxClient.DONE)){throw new Error("Call authDriver to set an authentication driver")}if(this.authState===DropboxClient.ERROR){throw new Error("Client got in an error state. Call reset() to reuse it!")}oldAuthState=null;_fsmStep=function(){var authUrl;if(oldAuthState!==_this.authState){if(oldAuthState!==null){_this.onAuthStateChange.dispatch(_this)}oldAuthState=_this.authState;if(_this.driver&&_this.driver.onAuthStateChange){_this.driver.onAuthStateChange(_this,_fsmStep);return}}switch(_this.authState){case DropboxClient.RESET:if(!interactive){if(callback){callback(null,_this)}return}return _this.requestToken(function(error,data){var token,tokenSecret;if(error){_this.authError=error;_this.authState=DropboxClient.ERROR}else{token=data.oauth_token;tokenSecret=data.oauth_token_secret;_this.oauth.setToken(token,tokenSecret);_this.authState=DropboxClient.REQUEST}_this._credentials=null;return _fsmStep()});case DropboxClient.REQUEST:if(!interactive){if(callback){callback(null,_this)}return}authUrl=_this.authorizeUrl(_this.oauth.token);return _this.driver.doAuthorize(authUrl,_this.oauth.token,_this.oauth.tokenSecret,function(){_this.authState=DropboxClient.AUTHORIZED;_this._credentials=null;return _fsmStep()});case DropboxClient.AUTHORIZED:return _this.getAccessToken(function(error,data){if(error){_this.authError=error;_this.authState=DropboxClient.ERROR}else{_this.oauth.setToken(data.oauth_token,data.oauth_token_secret);_this.uid=data.uid;_this.authState=DropboxClient.DONE}_this._credentials=null;return _fsmStep()});case DropboxClient.DONE:if(callback){callback(null,_this)}break;case DropboxClient.SIGNED_OFF:_this.authState=DropboxClient.RESET;_this.reset();return _fsmStep();case DropboxClient.ERROR:if(callback){callback(_this.authError,_this)}}};_fsmStep();return this};Client.prototype.isAuthenticated=function(){return this.authState===DropboxClient.DONE};Client.prototype.signOut=function(callback){var xhr,_this=this;xhr=new Dropbox.Xhr("POST",this.urls.signOut);xhr.signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error){if(error){if(callback){callback(error)}return}_this.authState=DropboxClient.RESET;_this.reset();_this.authState=DropboxClient.SIGNED_OFF;_this.onAuthStateChange.dispatch(_this);if(_this.driver&&_this.driver.onAuthStateChange){return _this.driver.onAuthStateChange(_this,function(){if(callback){return callback(error)}})}else{if(callback){return callback(error)}}})};Client.prototype.signOff=function(callback){return this.signOut(callback)};Client.prototype.getUserInfo=function(options,callback){var httpCache,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}httpCache=false;if(options&&options.httpCache){httpCache=true}xhr=new Dropbox.Xhr("GET",this.urls.accountInfo);xhr.signWithOauth(this.oauth,httpCache);return this.dispatchXhr(xhr,function(error,userData){return callback(error,Dropbox.UserInfo.parse(userData),userData)})};Client.prototype.readFile=function(path,options,callback){var httpCache,params,rangeEnd,rangeHeader,rangeStart,responseType,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={};responseType="text";rangeHeader=null;httpCache=false;if(options){if(options.versionTag){params.rev=options.versionTag}else if(options.rev){params.rev=options.rev}if(options.arrayBuffer){responseType="arraybuffer"}else if(options.blob){responseType="blob"}else if(options.buffer){responseType="buffer"}else if(options.binary){responseType="b"}if(options.length){if(options.start!=null){rangeStart=options.start;rangeEnd=options.start+options.length-1}else{rangeStart="";rangeEnd=options.length}rangeHeader="bytes="+rangeStart+"-"+rangeEnd}else if(options.start!=null){rangeHeader="bytes="+options.start+"-"}if(options.httpCache){httpCache=true}}xhr=new Dropbox.Xhr("GET",""+this.urls.getFile+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth,httpCache);xhr.setResponseType(responseType);if(rangeHeader){if(rangeHeader){xhr.setHeader("Range",rangeHeader)}xhr.reportResponseHeaders()}return this.dispatchXhr(xhr,function(error,data,metadata,headers){var rangeInfo;if(headers){rangeInfo=Dropbox.RangeInfo.parse(headers["content-range"])}else{rangeInfo=null}return callback(error,data,Dropbox.Stat.parse(metadata),rangeInfo)})};Client.prototype.writeFile=function(path,data,options,callback){var useForm;if(!callback&&typeof options==="function"){callback=options;options=null}useForm=Dropbox.Xhr.canSendForms&&typeof data==="object";if(useForm){return this.writeFileUsingForm(path,data,options,callback)}else{return this.writeFileUsingPut(path,data,options,callback)}};Client.prototype.writeFileUsingForm=function(path,data,options,callback){var fileName,params,slashIndex,xhr;slashIndex=path.lastIndexOf("/");if(slashIndex===-1){fileName=path;path=""}else{fileName=path.substring(slashIndex);path=path.substring(0,slashIndex)}params={file:fileName};if(options){if(options.noOverwrite){params.overwrite="false"}if(options.lastVersionTag){params.parent_rev=options.lastVersionTag}else if(options.parentRev||options.parent_rev){params.parent_rev=options.parentRev||options.parent_rev}}xhr=new Dropbox.Xhr("POST",""+this.urls.postFile+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth).setFileField("file",fileName,data,"application/octet-stream");delete params.file;return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.writeFileUsingPut=function(path,data,options,callback){var params,xhr;params={};if(options){if(options.noOverwrite){params.overwrite="false"}if(options.lastVersionTag){params.parent_rev=options.lastVersionTag}else if(options.parentRev||options.parent_rev){params.parent_rev=options.parentRev||options.parent_rev}}xhr=new Dropbox.Xhr("POST",""+this.urls.putFile+"/"+this.urlEncodePath(path));xhr.setBody(data).setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.resumableUploadStep=function(data,cursor,callback){var params,xhr;if(cursor){params={offset:cursor.offset};if(cursor.tag){params.upload_id=cursor.tag}}else{params={offset:0}}xhr=new Dropbox.Xhr("POST",this.urls.chunkedUpload);xhr.setBody(data).setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,cursor){if(error&&error.status===Dropbox.ApiError.INVALID_PARAM&&error.response&&error.response.upload_id&&error.response.offset){return callback(null,Dropbox.UploadCursor.parse(error.response))}else{return callback(error,Dropbox.UploadCursor.parse(cursor))}})};Client.prototype.resumableUploadFinish=function(path,cursor,options,callback){var params,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={upload_id:cursor.tag};if(options){if(options.lastVersionTag){params.parent_rev=options.lastVersionTag}else if(options.parentRev||options.parent_rev){params.parent_rev=options.parentRev||options.parent_rev}if(options.noOverwrite){params.overwrite="false"}}xhr=new Dropbox.Xhr("POST",""+this.urls.commitChunkedUpload+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.stat=function(path,options,callback){var httpCache,params,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={};httpCache=false;if(options){if(options.version!=null){params.rev=options.version}if(options.removed||options.deleted){params.include_deleted="true"}if(options.readDir){params.list="true";if(options.readDir!==true){params.file_limit=options.readDir.toString()}}if(options.cacheHash){params.hash=options.cacheHash}if(options.httpCache){httpCache=true}}params.include_deleted||(params.include_deleted="false");params.list||(params.list="false");xhr=new Dropbox.Xhr("GET",""+this.urls.metadata+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth,httpCache);return this.dispatchXhr(xhr,function(error,metadata){var entries,entry,stat;stat=Dropbox.Stat.parse(metadata);if(metadata!=null?metadata.contents:void 0){entries=function(){var _i,_len,_ref,_results;_ref=metadata.contents;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){entry=_ref[_i];_results.push(Dropbox.Stat.parse(entry))}return _results}()}else{entries=void 0}return callback(error,stat,entries)})};Client.prototype.readdir=function(path,options,callback){var statOptions;if(!callback&&typeof options==="function"){callback=options;options=null}statOptions={readDir:true};if(options){if(options.limit!=null){statOptions.readDir=options.limit}if(options.versionTag){statOptions.versionTag=options.versionTag}if(options.removed||options.deleted){statOptions.removed=options.removed||options.deleted}if(options.httpCache){statOptions.httpCache=options.httpCache}}return this.stat(path,statOptions,function(error,stat,entry_stats){var entries,entry_stat;if(entry_stats){entries=function(){var _i,_len,_results;_results=[];for(_i=0,_len=entry_stats.length;_i<_len;_i++){entry_stat=entry_stats[_i];_results.push(entry_stat.name)}return _results}()}else{entries=null}return callback(error,entries,stat,entry_stats)})};Client.prototype.metadata=function(path,options,callback){return this.stat(path,options,callback)};Client.prototype.makeUrl=function(path,options,callback){var isDirect,params,url,useDownloadHack,xhr,_this=this;if(!callback&&typeof options==="function"){callback=options;options=null}if(options&&(options["long"]||options.longUrl||options.downloadHack)){params={short_url:"false"}}else{params={}}path=this.urlEncodePath(path);url=""+this.urls.shares+"/"+path;isDirect=false;useDownloadHack=false;if(options){if(options.downloadHack){isDirect=true;useDownloadHack=true}else if(options.download){isDirect=true;url=""+this.urls.media+"/"+path}}xhr=new Dropbox.Xhr("POST",url).setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,urlData){if(useDownloadHack&&(urlData!=null?urlData.url:void 0)){urlData.url=urlData.url.replace(_this.authServer,_this.downloadServer)}return callback(error,Dropbox.PublicUrl.parse(urlData,isDirect))})};Client.prototype.history=function(path,options,callback){var httpCache,params,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={};httpCache=false;if(options){if(options.limit!=null){params.rev_limit=options.limit}if(options.httpCache){httpCache=true}}xhr=new Dropbox.Xhr("GET",""+this.urls.revisions+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth,httpCache);return this.dispatchXhr(xhr,function(error,versions){var metadata,stats;if(versions){stats=function(){var _i,_len,_results;_results=[];for(_i=0,_len=versions.length;_i<_len;_i++){metadata=versions[_i];_results.push(Dropbox.Stat.parse(metadata))}return _results}()}else{stats=void 0}return callback(error,stats)})};Client.prototype.revisions=function(path,options,callback){return this.history(path,options,callback)};Client.prototype.thumbnailUrl=function(path,options){var xhr;
xhr=this.thumbnailXhr(path,options);return xhr.paramsToUrl().url};Client.prototype.readThumbnail=function(path,options,callback){var responseType,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}responseType="b";if(options){if(options.blob){responseType="blob"}}xhr=this.thumbnailXhr(path,options);xhr.setResponseType(responseType);return this.dispatchXhr(xhr,function(error,data,metadata){return callback(error,data,Dropbox.Stat.parse(metadata))})};Client.prototype.thumbnailXhr=function(path,options){var params,xhr;params={};if(options){if(options.format){params.format=options.format}else if(options.png){params.format="png"}if(options.size){params.size=options.size}}xhr=new Dropbox.Xhr("GET",""+this.urls.thumbnails+"/"+this.urlEncodePath(path));return xhr.setParams(params).signWithOauth(this.oauth)};Client.prototype.revertFile=function(path,versionTag,callback){var xhr;xhr=new Dropbox.Xhr("POST",""+this.urls.restore+"/"+this.urlEncodePath(path));xhr.setParams({rev:versionTag}).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.restore=function(path,versionTag,callback){return this.revertFile(path,versionTag,callback)};Client.prototype.findByName=function(path,namePattern,options,callback){var httpCache,params,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={query:namePattern};httpCache=false;if(options){if(options.limit!=null){params.file_limit=options.limit}if(options.removed||options.deleted){params.include_deleted=true}if(options.httpCache){httpCache=true}}xhr=new Dropbox.Xhr("GET",""+this.urls.search+"/"+this.urlEncodePath(path));xhr.setParams(params).signWithOauth(this.oauth,httpCache);return this.dispatchXhr(xhr,function(error,results){var metadata,stats;if(results){stats=function(){var _i,_len,_results;_results=[];for(_i=0,_len=results.length;_i<_len;_i++){metadata=results[_i];_results.push(Dropbox.Stat.parse(metadata))}return _results}()}else{stats=void 0}return callback(error,stats)})};Client.prototype.search=function(path,namePattern,options,callback){return this.findByName(path,namePattern,options,callback)};Client.prototype.makeCopyReference=function(path,callback){var xhr;xhr=new Dropbox.Xhr("GET",""+this.urls.copyRef+"/"+this.urlEncodePath(path));xhr.signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,refData){return callback(error,Dropbox.CopyReference.parse(refData))})};Client.prototype.copyRef=function(path,callback){return this.makeCopyReference(path,callback)};Client.prototype.pullChanges=function(cursor,callback){var params,xhr;if(!callback&&typeof cursor==="function"){callback=cursor;cursor=null}if(cursor){if(cursor.cursorTag){params={cursor:cursor.cursorTag}}else{params={cursor:cursor}}}else{params={}}xhr=new Dropbox.Xhr("POST",this.urls.delta);xhr.setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,deltaInfo){return callback(error,Dropbox.PulledChanges.parse(deltaInfo))})};Client.prototype.delta=function(cursor,callback){return this.pullChanges(cursor,callback)};Client.prototype.mkdir=function(path,callback){var xhr;xhr=new Dropbox.Xhr("POST",this.urls.fileopsCreateFolder);xhr.setParams({root:this.fileRoot,path:this.normalizePath(path)}).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.remove=function(path,callback){var xhr;xhr=new Dropbox.Xhr("POST",this.urls.fileopsDelete);xhr.setParams({root:this.fileRoot,path:this.normalizePath(path)}).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.unlink=function(path,callback){return this.remove(path,callback)};Client.prototype["delete"]=function(path,callback){return this.remove(path,callback)};Client.prototype.copy=function(from,toPath,callback){var options,params,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}params={root:this.fileRoot,to_path:this.normalizePath(toPath)};if(from instanceof Dropbox.CopyReference){params.from_copy_ref=from.tag}else{params.from_path=this.normalizePath(from)}xhr=new Dropbox.Xhr("POST",this.urls.fileopsCopy);xhr.setParams(params).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.move=function(fromPath,toPath,callback){var options,xhr;if(!callback&&typeof options==="function"){callback=options;options=null}xhr=new Dropbox.Xhr("POST",this.urls.fileopsMove);xhr.setParams({root:this.fileRoot,from_path:this.normalizePath(fromPath),to_path:this.normalizePath(toPath)}).signWithOauth(this.oauth);return this.dispatchXhr(xhr,function(error,metadata){if(callback){return callback(error,Dropbox.Stat.parse(metadata))}})};Client.prototype.reset=function(){var oldAuthState;this.uid=null;this.oauth.setToken(null,"");oldAuthState=this.authState;this.authState=DropboxClient.RESET;if(oldAuthState!==this.authState){this.onAuthStateChange.dispatch(this)}this.authError=null;this._credentials=null;return this};Client.prototype.setCredentials=function(credentials){var oldAuthState;oldAuthState=this.authState;this.oauth.reset(credentials);this.uid=credentials.uid||null;if(credentials.authState){this.authState=credentials.authState}else{if(credentials.token){this.authState=DropboxClient.DONE}else{this.authState=DropboxClient.RESET}}this.authError=null;this._credentials=null;if(oldAuthState!==this.authState){this.onAuthStateChange.dispatch(this)}return this};Client.prototype.appHash=function(){return this.oauth.appHash()};Client.prototype.setupUrls=function(){this.fileRoot=this.sandbox?"sandbox":"dropbox";return this.urls={requestToken:""+this.apiServer+"/1/oauth/request_token",authorize:""+this.authServer+"/1/oauth/authorize",accessToken:""+this.apiServer+"/1/oauth/access_token",signOut:""+this.apiServer+"/1/unlink_access_token",accountInfo:""+this.apiServer+"/1/account/info",getFile:""+this.fileServer+"/1/files/"+this.fileRoot,postFile:""+this.fileServer+"/1/files/"+this.fileRoot,putFile:""+this.fileServer+"/1/files_put/"+this.fileRoot,metadata:""+this.apiServer+"/1/metadata/"+this.fileRoot,delta:""+this.apiServer+"/1/delta",revisions:""+this.apiServer+"/1/revisions/"+this.fileRoot,restore:""+this.apiServer+"/1/restore/"+this.fileRoot,search:""+this.apiServer+"/1/search/"+this.fileRoot,shares:""+this.apiServer+"/1/shares/"+this.fileRoot,media:""+this.apiServer+"/1/media/"+this.fileRoot,copyRef:""+this.apiServer+"/1/copy_ref/"+this.fileRoot,thumbnails:""+this.fileServer+"/1/thumbnails/"+this.fileRoot,chunkedUpload:""+this.fileServer+"/1/chunked_upload",commitChunkedUpload:""+this.fileServer+"/1/commit_chunked_upload/"+this.fileRoot,fileopsCopy:""+this.apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this.apiServer+"/1/fileops/create_folder",fileopsDelete:""+this.apiServer+"/1/fileops/delete",fileopsMove:""+this.apiServer+"/1/fileops/move"}};Client.prototype.authState=null;Client.ERROR=0;Client.RESET=1;Client.REQUEST=2;Client.AUTHORIZED=3;Client.DONE=4;Client.SIGNED_OFF=5;Client.prototype.urlEncodePath=function(path){return Dropbox.Xhr.urlEncodeValue(this.normalizePath(path)).replace(/%2F/gi,"/")};Client.prototype.normalizePath=function(path){var i;if(path.substring(0,1)==="/"){i=1;while(path.substring(i,i+1)==="/"){i+=1}return path.substring(i)}else{return path}};Client.prototype.requestToken=function(callback){var xhr;xhr=new Dropbox.Xhr("POST",this.urls.requestToken).signWithOauth(this.oauth);return this.dispatchXhr(xhr,callback)};Client.prototype.authorizeUrl=function(token){var params;params={oauth_token:token,oauth_callback:this.driver.url(token)};return""+this.urls.authorize+"?"+Dropbox.Xhr.urlEncode(params)};Client.prototype.getAccessToken=function(callback){var xhr;xhr=new Dropbox.Xhr("POST",this.urls.accessToken).signWithOauth(this.oauth);return this.dispatchXhr(xhr,callback)};Client.prototype.dispatchXhr=function(xhr,callback){var nativeXhr;xhr.setCallback(callback);xhr.onError=this.xhrOnErrorHandler;xhr.prepare();nativeXhr=xhr.xhr;if(this.onXhr.dispatch(xhr)){xhr.send()}return nativeXhr};Client.prototype.handleXhrError=function(error,callback){var _this=this;if(error.status===Dropbox.ApiError.INVALID_TOKEN&&this.authState===DropboxClient.DONE){this.authError=error;this.authState=DropboxClient.ERROR;this.onAuthStateChange.dispatch(this);if(this.driver&&this.driver.onAuthStateChange){this.driver.onAuthStateChange(this,function(){_this.onError.dispatch(error);return callback(error)});return null}}this.onError.dispatch(error);callback(error);return null};Client.prototype.defaultApiServer=function(){return"https://api.dropbox.com"};Client.prototype.defaultAuthServer=function(){return this.apiServer.replace("api.","www.")};Client.prototype.defaultFileServer=function(){return this.apiServer.replace("api.","api-content.")};Client.prototype.defaultDownloadServer=function(){return this.apiServer.replace("api.","dl.")};Client.prototype.computeCredentials=function(){var value;value={key:this.oauth.key,sandbox:this.sandbox};if(this.oauth.secret){value.secret=this.oauth.secret}if(this.oauth.token){value.token=this.oauth.token;value.tokenSecret=this.oauth.tokenSecret}if(this.uid){value.uid=this.uid}if(this.authState!==DropboxClient.ERROR&&this.authState!==DropboxClient.RESET&&this.authState!==DropboxClient.DONE&&this.authState!==DropboxClient.SIGNED_OFF){value.authState=this.authState}if(this.apiServer!==this.defaultApiServer()){value.server=this.apiServer}if(this.authServer!==this.defaultAuthServer()){value.authServer=this.authServer}if(this.fileServer!==this.defaultFileServer()){value.fileServer=this.fileServer}if(this.downloadServer!==this.defaultDownloadServer()){value.downloadServer=this.downloadServer}return this._credentials=value};return Client}();DropboxClient=Dropbox.Client;Dropbox.Drivers.BrowserBase=function(){function BrowserBase(options){this.rememberUser=(options!=null?options.rememberUser:void 0)||false;this.useQuery=(options!=null?options.useQuery:void 0)||false;this.scope=(options!=null?options.scope:void 0)||"default";this.storageKey=null;this.dbTokenRe=new RegExp("(#|\\?|&)dboauth_token=([^&#]+)(&|#|$)");this.rejectedRe=new RegExp("(#|\\?|&)not_approved=true(&|#|$)");this.tokenRe=new RegExp("(#|\\?|&)oauth_token=([^&#]+)(&|#|$)")}BrowserBase.prototype.onAuthStateChange=function(client,callback){var _this=this;this.setStorageKey(client);switch(client.authState){case DropboxClient.RESET:return this.loadCredentials(function(credentials){if(!credentials){return callback()}if(credentials.authState){client.setCredentials(credentials);return callback()}if(!_this.rememberUser){_this.forgetCredentials();return callback()}client.setCredentials(credentials);return client.getUserInfo(function(error){if(error){client.reset();return _this.forgetCredentials(callback)}else{return callback()}})});case DropboxClient.REQUEST:return this.storeCredentials(client.credentials(),callback);case DropboxClient.DONE:if(this.rememberUser){return this.storeCredentials(client.credentials(),callback)}return this.forgetCredentials(callback);case DropboxClient.SIGNED_OFF:return this.forgetCredentials(callback);case DropboxClient.ERROR:return this.forgetCredentials(callback);default:callback();return this}};BrowserBase.prototype.setStorageKey=function(client){this.storageKey="dropbox-auth:"+this.scope+":"+client.appHash();return this};BrowserBase.prototype.storeCredentials=function(credentials,callback){localStorage.setItem(this.storageKey,JSON.stringify(credentials));callback();return this};BrowserBase.prototype.loadCredentials=function(callback){var jsonString;jsonString=localStorage.getItem(this.storageKey);if(!jsonString){callback(null);return this}try{callback(JSON.parse(jsonString))}catch(jsonError){callback(null)}return this};BrowserBase.prototype.forgetCredentials=function(callback){localStorage.removeItem(this.storageKey);callback();return this};BrowserBase.prototype.computeUrl=function(baseUrl){var fragment,location,locationPair,querySuffix;querySuffix="_dropboxjs_scope="+encodeURIComponent(this.scope)+"&dboauth_token=";location=baseUrl;if(location.indexOf("#")===-1){fragment=null}else{locationPair=location.split("#",2);location=locationPair[0];fragment=locationPair[1]}if(this.useQuery){if(location.indexOf("?")===-1){location+="?"+querySuffix}else{location+="&"+querySuffix}if(fragment){return[location,"#"+fragment]}else{return[location,""]}}else{return[location+"#?"+querySuffix,""]}};BrowserBase.prototype.locationToken=function(url){var location,match,scopePattern;location=url||Dropbox.Drivers.BrowserBase.currentLocation();scopePattern="_dropboxjs_scope="+encodeURIComponent(this.scope)+"&";if((typeof location.indexOf==="function"?location.indexOf(scopePattern):void 0)===-1){return null}if(this.rejectedRe.test(location)){match=this.dbTokenRe.exec(location);if(match){return decodeURIComponent(match[2])}else{return null}}match=this.tokenRe.exec(location);if(match){return decodeURIComponent(match[2])}return null};BrowserBase.currentLocation=function(){return window.location.href};return BrowserBase}();Dropbox.Drivers.Redirect=function(_super){__extends(Redirect,_super);function Redirect(options){var _ref;Redirect.__super__.constructor.call(this,options);_ref=this.computeUrl(Dropbox.Drivers.BrowserBase.currentLocation()),this.receiverUrl1=_ref[0],this.receiverUrl2=_ref[1]}Redirect.prototype.onAuthStateChange=function(client,callback){var superCall,_this=this;superCall=function(){return function(){return Redirect.__super__.onAuthStateChange.call(_this,client,callback)}}();this.setStorageKey(client);if(client.authState===DropboxClient.RESET){return this.loadCredentials(function(credentials){if(credentials&&credentials.authState){if(credentials.token===_this.locationToken()&&credentials.authState===DropboxClient.REQUEST){credentials.authState=DropboxClient.AUTHORIZED;return _this.storeCredentials(credentials,superCall)}else{return _this.forgetCredentials(superCall)}}return superCall()})}else{return superCall()}};Redirect.prototype.url=function(token){return this.receiverUrl1+encodeURIComponent(token)+this.receiverUrl2};Redirect.prototype.doAuthorize=function(authUrl){return window.location.assign(authUrl)};return Redirect}(Dropbox.Drivers.BrowserBase);Dropbox.Drivers.Popup=function(_super){__extends(Popup,_super);function Popup(options){var _ref;Popup.__super__.constructor.call(this,options);_ref=this.computeUrl(this.baseUrl(options)),this.receiverUrl1=_ref[0],this.receiverUrl2=_ref[1]}Popup.prototype.onAuthStateChange=function(client,callback){var superCall,_this=this;superCall=function(){return function(){return Popup.__super__.onAuthStateChange.call(_this,client,callback)}}();this.setStorageKey(client);if(client.authState===DropboxClient.RESET){return this.loadCredentials(function(credentials){if(credentials&&credentials.authState){return _this.forgetCredentials(superCall)}return superCall()})}else{return superCall()}};Popup.prototype.doAuthorize=function(authUrl,token,tokenSecret,callback){this.listenForMessage(token,callback);return this.openWindow(authUrl)};Popup.prototype.url=function(token){return this.receiverUrl1+encodeURIComponent(token)+this.receiverUrl2};Popup.prototype.baseUrl=function(options){var fragments;if(options){if(options.receiverUrl){return options.receiverUrl}else if(options.receiverFile){fragments=Dropbox.Drivers.BrowserBase.currentLocation().split("/");fragments[fragments.length-1]=options.receiverFile;return fragments.join("/")}}return Dropbox.Drivers.BrowserBase.currentLocation()};Popup.prototype.openWindow=function(url){return window.open(url,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))};Popup.prototype.popupWindowSpec=function(popupWidth,popupHeight){var height,popupLeft,popupTop,width,x0,y0,_ref,_ref1,_ref2,_ref3;x0=(_ref=window.screenX)!=null?_ref:window.screenLeft;y0=(_ref1=window.screenY)!=null?_ref1:window.screenTop;width=(_ref2=window.outerWidth)!=null?_ref2:document.documentElement.clientWidth;height=(_ref3=window.outerHeight)!=null?_ref3:document.documentElement.clientHeight;popupLeft=Math.round(x0+(width-popupWidth)/2);popupTop=Math.round(y0+(height-popupHeight)/2.5);if(popupLeft<x0){popupLeft=x0}if(popupTop<y0){popupTop=y0}return"width="+popupWidth+",height="+popupHeight+","+("left="+popupLeft+",top="+popupTop)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"};Popup.prototype.listenForMessage=function(token,callback){var listener,_this=this;listener=function(event){var data;if(event.data){data=event.data}else{data=event}if(_this.locationToken(data)===token){token=null;window.removeEventListener("message",listener);Dropbox.Drivers.Popup.onMessage.removeListener(listener);return callback()}};window.addEventListener("message",listener,false);return Dropbox.Drivers.Popup.onMessage.addListener(listener)};Popup.oauthReceiver=function(){return window.addEventListener("load",function(){var opener;opener=window.opener;if(window.parent!==window.top){opener||(opener=window.parent)}if(opener){try{opener.postMessage(window.location.href,"*")}catch(ieError){}try{opener.Dropbox.Drivers.Popup.onMessage.dispatch(window.location.href)}catch(frameError){}}return window.close()})};Popup.onMessage=new Dropbox.EventSource;return Popup}(Dropbox.Drivers.BrowserBase);DropboxChromeOnMessage=null;DropboxChromeSendMessage=null;if(typeof chrome!=="undefined"&&chrome!==null){if(chrome.runtime){if(chrome.runtime.onMessage){DropboxChromeOnMessage=chrome.runtime.onMessage}if(chrome.runtime.sendMessage){DropboxChromeSendMessage=function(m){return chrome.runtime.sendMessage(m)}}}if(chrome.extension){if(chrome.extension.onMessage){DropboxChromeOnMessage||(DropboxChromeOnMessage=chrome.extension.onMessage)}if(chrome.extension.sendMessage){DropboxChromeSendMessage||(DropboxChromeSendMessage=function(m){return chrome.extension.sendMessage(m)})}}if(!DropboxChromeOnMessage){(function(){var page,pageHack;pageHack=function(page){if(page.Dropbox){Dropbox.Drivers.Chrome.prototype.onMessage=page.Dropbox.Drivers.Chrome.onMessage;return Dropbox.Drivers.Chrome.prototype.sendMessage=page.Dropbox.Drivers.Chrome.sendMessage}else{page.Dropbox=Dropbox;Dropbox.Drivers.Chrome.prototype.onMessage=new Dropbox.EventSource;return Dropbox.Drivers.Chrome.prototype.sendMessage=function(m){return Dropbox.Drivers.Chrome.prototype.onMessage.dispatch(m)}}};if(chrome.extension&&chrome.extension.getBackgroundPage){if(page=chrome.extension.getBackgroundPage()){return pageHack(page)}}if(chrome.runtime&&chrome.runtime.getBackgroundPage){return chrome.runtime.getBackgroundPage(function(page){return pageHack(page)})}})()}}Dropbox.Drivers.Chrome=function(_super){__extends(Chrome,_super);Chrome.prototype.onMessage=DropboxChromeOnMessage;Chrome.prototype.sendMessage=DropboxChromeSendMessage;Chrome.prototype.expandUrl=function(url){if(chrome.runtime&&chrome.runtime.getURL){return chrome.runtime.getURL(url)}if(chrome.extension&&chrome.extension.getURL){return chrome.extension.getURL(url)}return url};function Chrome(options){var receiverPath,_ref;Chrome.__super__.constructor.call(this,options);receiverPath=options&&options.receiverPath||"chrome_oauth_receiver.html";this.rememberUser=true;this.useQuery=true;_ref=this.computeUrl(this.expandUrl(receiverPath)),this.receiverUrl=_ref[0],this.receiverUrl2=_ref[1];this.storageKey="dropbox_js_"+this.scope+"_credentials"}Chrome.prototype.onAuthStateChange=function(client,callback){var _this=this;switch(client.authState){case Dropbox.Client.RESET:return this.loadCredentials(function(credentials){if(credentials){if(credentials.authState){return _this.forgetCredentials(callback)}client.setCredentials(credentials)}return callback()});case Dropbox.Client.DONE:return this.storeCredentials(client.credentials(),callback);case Dropbox.Client.SIGNED_OFF:return this.forgetCredentials(callback);case Dropbox.Client.ERROR:return this.forgetCredentials(callback);default:return callback()}};Chrome.prototype.doAuthorize=function(authUrl,token,tokenSecret,callback){var window,_ref,_ref1,_ref2,_this=this;if((_ref=chrome.identity)!=null?_ref.launchWebAuthFlow:void 0){return chrome.identity.launchWebAuthFlow({url:authUrl,interactive:true},function(redirectUrl){if(_this.locationToken(redirectUrl)===token){return callback()}})}else if((_ref1=chrome.experimental)!=null?(_ref2=_ref1.identity)!=null?_ref2.launchWebAuthFlow:void 0:void 0){return chrome.experimental.identity.launchWebAuthFlow({url:authUrl,interactive:true},function(redirectUrl){if(_this.locationToken(redirectUrl)===token){return callback()}})}else{window={handle:null};this.listenForMessage(token,window,callback);return this.openWindow(authUrl,function(handle){return window.handle=handle})}};Chrome.prototype.openWindow=function(url,callback){if(chrome.tabs&&chrome.tabs.create){chrome.tabs.create({url:url,active:true,pinned:false},function(tab){return callback(tab)});return this}return this};Chrome.prototype.closeWindow=function(handle){if(chrome.tabs&&chrome.tabs.remove&&handle.id){chrome.tabs.remove(handle.id);return this}if(chrome.app&&chrome.app.window&&handle.close){handle.close();return this}return this};Chrome.prototype.url=function(token){return this.receiverUrl+encodeURIComponent(token)};Chrome.prototype.listenForMessage=function(token,window,callback){var listener,_this=this;listener=function(message,sender){if(sender&&sender.tab){if(sender.tab.url.substring(0,_this.receiverUrl.length)!==_this.receiverUrl){return}}if(!message.dropbox_oauth_receiver_href){return}if(_this.locationToken(message.dropbox_oauth_receiver_href)===token){if(window.handle){_this.closeWindow(window.handle)}_this.onMessage.removeListener(listener);return callback()}};return this.onMessage.addListener(listener)};Chrome.prototype.storeCredentials=function(credentials,callback){var items;items={};items[this.storageKey]=credentials;chrome.storage.local.set(items,callback);return this};Chrome.prototype.loadCredentials=function(callback){var _this=this;chrome.storage.local.get(this.storageKey,function(items){return callback(items[_this.storageKey]||null)});return this};Chrome.prototype.forgetCredentials=function(callback){chrome.storage.local.remove(this.storageKey,callback);return this};Chrome.oauthReceiver=function(){return window.addEventListener("load",function(){var driver;driver=new Dropbox.Drivers.Chrome;driver.sendMessage({dropbox_oauth_receiver_href:window.location.href});if(window.close){return window.close()}})};return Chrome}(Dropbox.Drivers.BrowserBase);Dropbox.Drivers.NodeServer=function(){function NodeServer(options){this.port=(options!=null?options.port:void 0)||8912;this.faviconFile=(options!=null?options.favicon:void 0)||null;this.fs=require("fs");this.http=require("http");this.open=require("open");this.callbacks={};this.nodeUrl=require("url");this.createApp()}NodeServer.prototype.url=function(token){return"http://localhost:"+this.port+"/oauth_callback?dboauth_token="+encodeURIComponent(token)};NodeServer.prototype.doAuthorize=function(authUrl,token,tokenSecret,callback){this.callbacks[token]=callback;return this.openBrowser(authUrl)};NodeServer.prototype.openBrowser=function(url){if(!url.match(/^https?:\/\//)){throw new Error("Not a http/https URL: "+url)}return this.open(url)};NodeServer.prototype.createApp=function(){var _this=this;this.app=this.http.createServer(function(request,response){return _this.doRequest(request,response)});return this.app.listen(this.port)};NodeServer.prototype.closeServer=function(){return this.app.close()};NodeServer.prototype.doRequest=function(request,response){var data,rejected,token,url,_this=this;url=this.nodeUrl.parse(request.url,true);if(url.pathname==="/oauth_callback"){if(url.query.not_approved==="true"){rejected=true;token=url.query.dboauth_token}else{rejected=false;token=url.query.oauth_token}if(this.callbacks[token]){this.callbacks[token](rejected);delete this.callbacks[token]}}data="";request.on("data",function(dataFragment){return data+=dataFragment});return request.on("end",function(){if(_this.faviconFile&&url.pathname==="/favicon.ico"){return _this.sendFavicon(response)}else{return _this.closeBrowser(response)}})};NodeServer.prototype.closeBrowser=function(response){var closeHtml;closeHtml='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>';response.writeHead(200,{"Content-Length":closeHtml.length,"Content-Type":"text/html"});response.write(closeHtml);return response.end()};NodeServer.prototype.sendFavicon=function(response){return this.fs.readFile(this.faviconFile,function(error,data){response.writeHead(200,{"Content-Length":data.length,"Content-Type":"image/x-icon"});response.write(data);return response.end()})};return NodeServer}();base64HmacSha1=function(string,key){return arrayToBase64(hmacSha1(stringToArray(string),stringToArray(key),string.length,key.length))};base64Sha1=function(string){return arrayToBase64(sha1(stringToArray(string),string.length))};if(typeof require!=="undefined"){try{crypto=require("crypto");if(crypto.createHmac&&crypto.createHash){base64HmacSha1=function(string,key){var hmac;hmac=crypto.createHmac("sha1",key);hmac.update(string);return hmac.digest("base64")};base64Sha1=function(string){var hash;hash=crypto.createHash("sha1");hash.update(string);return hash.digest("base64")}}}catch(requireError){}}Dropbox.Util.hmac=base64HmacSha1;Dropbox.Util.sha1=base64Sha1;hmacSha1=function(string,key,length,keyLength){var hash1,i,ipad,opad;if(key.length>16){key=sha1(key,keyLength)}ipad=function(){var _i,_results;_results=[];for(i=_i=0;_i<16;i=++_i){_results.push(key[i]^909522486)}return _results}();opad=function(){var _i,_results;_results=[];for(i=_i=0;_i<16;i=++_i){_results.push(key[i]^1549556828)}return _results}();hash1=sha1(ipad.concat(string),64+length);return sha1(opad.concat(hash1),64+20)};sha1=function(string,length){var a,a0,b,b0,c,c0,d,d0,e,e0,ft,i,j,kt,limit,state,t,_i;string[length>>2]|=1<<31-((length&3)<<3);string[(length+8>>6<<4)+15]=length<<3;state=Array(80);a=1732584193;b=-271733879;c=-1732584194;d=271733878;e=-1009589776;i=0;limit=string.length;while(i<limit){a0=a;b0=b;c0=c;d0=d;e0=e;for(j=_i=0;_i<80;j=++_i){if(j<16){state[j]=string[i+j]}else{state[j]=rotateLeft32(state[j-3]^state[j-8]^state[j-14]^state[j-16],1)}if(j<20){ft=b&c|~b&d;kt=1518500249}else if(j<40){ft=b^c^d;kt=1859775393}else if(j<60){ft=b&c|b&d|c&d;kt=-1894007588}else{ft=b^c^d;kt=-899497514}t=add32(add32(rotateLeft32(a,5),ft),add32(add32(e,state[j]),kt));e=d;d=c;c=rotateLeft32(b,30);b=a;a=t}a=add32(a,a0);b=add32(b,b0);c=add32(c,c0);d=add32(d,d0);e=add32(e,e0);i+=16}return[a,b,c,d,e]};rotateLeft32=function(value,count){return value<<count|value>>>32-count};add32=function(a,b){var high,low;low=(a&65535)+(b&65535);high=(a>>16)+(b>>16)+(low>>16);return high<<16|low&65535};arrayToBase64=function(array){var i,i2,limit,string,trit;string="";i=0;limit=array.length*4;while(i<limit){i2=i;trit=(array[i2>>2]>>(3-(i2&3)<<3)&255)<<16;i2+=1;trit|=(array[i2>>2]>>(3-(i2&3)<<3)&255)<<8;i2+=1;trit|=array[i2>>2]>>(3-(i2&3)<<3)&255;string+=_base64Digits[trit>>18&63];string+=_base64Digits[trit>>12&63];i+=1;if(i>=limit){string+="="}else{string+=_base64Digits[trit>>6&63]}i+=1;if(i>=limit){string+="="}else{string+=_base64Digits[trit&63]}i+=1}return string};_base64Digits="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";stringToArray=function(string){var array,i,mask,_i,_ref;array=[];mask=255;for(i=_i=0,_ref=string.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){array[i>>2]|=(string.charCodeAt(i)&mask)<<(3-(i&3)<<3)}return array};Dropbox.Oauth=function(){function Oauth(options){this.key=this.k=null;this.secret=this.s=null;this.token=null;this.tokenSecret=null;this._appHash=null;this.reset(options)}Oauth.prototype.reset=function(options){var k,s,secret,_ref;if(options.secret){this.k=this.key=options.key;this.s=this.secret=options.secret;this._appHash=null}else if(options.key){this.key=options.key;this.secret=null;secret=atob(dropboxEncodeKey(this.key).split("|",2)[1]);_ref=secret.split("?",2),k=_ref[0],s=_ref[1];this.k=decodeURIComponent(k);this.s=decodeURIComponent(s);this._appHash=null}else{if(!this.k){throw new Error("No API key supplied")}}if(options.token){return this.setToken(options.token,options.tokenSecret)}else{return this.setToken(null,"")}};Oauth.prototype.setToken=function(token,tokenSecret){if(token&&!tokenSecret){throw new Error("No secret supplied with the user token")}this.token=token;this.tokenSecret=tokenSecret||"";this.hmacKey=Dropbox.Xhr.urlEncodeValue(this.s)+"&"+Dropbox.Xhr.urlEncodeValue(tokenSecret);return null};Oauth.prototype.authHeader=function(method,url,params){var header,oauth_params,param,value,_i,_len;this.addAuthParams(method,url,params);oauth_params=[];for(param in params){value=params[param];if(param.substring(0,6)==="oauth_"){oauth_params.push(param)}}oauth_params.sort();header=[];for(_i=0,_len=oauth_params.length;_i<_len;_i++){param=oauth_params[_i];header.push(Dropbox.Xhr.urlEncodeValue(param)+'="'+Dropbox.Xhr.urlEncodeValue(params[param])+'"');delete params[param]}return"OAuth "+header.join(",")};Oauth.prototype.addAuthParams=function(method,url,params){this.boilerplateParams(params);params.oauth_signature=this.signature(method,url,params);return params};Oauth.prototype.boilerplateParams=function(params){params.oauth_consumer_key=this.k;params.oauth_nonce=Dropbox.Oauth.nonce();params.oauth_signature_method="HMAC-SHA1";if(this.token){params.oauth_token=this.token}params.oauth_timestamp=Math.floor(Date.now()/1e3);params.oauth_version="1.0";return params};Oauth.nonce=function(){return Math.random().toString(36)};Oauth.prototype.signature=function(method,url,params){var string;string=method.toUpperCase()+"&"+Dropbox.Xhr.urlEncodeValue(url)+"&"+Dropbox.Xhr.urlEncodeValue(Dropbox.Xhr.urlEncode(params));return base64HmacSha1(string,this.hmacKey)};Oauth.prototype.appHash=function(){if(this._appHash){return this._appHash}return this._appHash=base64Sha1(this.k).replace(/\=/g,"")};return Oauth}();if(Date.now==null){Date.now=function(){return(new Date).getTime()}}dropboxEncodeKey=function(key,secret){var i,k,result,s,x,y,z,_i,_j,_ref,_ref1,_results;if(secret){secret=[encodeURIComponent(key),encodeURIComponent(secret)].join("?");key=function(){var _i,_ref,_results;_results=[];for(i=_i=0,_ref=key.length/2;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){_results.push((key.charCodeAt(i*2)&15)*16+(key.charCodeAt(i*2+1)&15))}return _results}()}else{_ref=key.split("|",2),key=_ref[0],secret=_ref[1];key=atob(key);key=function(){var _i,_ref1,_results;_results=[];for(i=_i=0,_ref1=key.length;0<=_ref1?_i<_ref1:_i>_ref1;i=0<=_ref1?++_i:--_i){_results.push(key.charCodeAt(i))}return _results}();secret=atob(secret)}s=function(){_results=[];for(_i=0;_i<256;_i++){_results.push(_i)}return _results}.apply(this);y=0;for(x=_j=0;_j<256;x=++_j){y=(y+s[i]+key[x%key.length])%256;_ref1=[s[y],s[x]],s[x]=_ref1[0],s[y]=_ref1[1]}x=y=0;result=function(){var _k,_ref2,_ref3,_results1;_results1=[];for(z=_k=0,_ref2=secret.length;0<=_ref2?_k<_ref2:_k>_ref2;z=0<=_ref2?++_k:--_k){x=(x+1)%256;y=(y+s[x])%256;_ref3=[s[y],s[x]],s[x]=_ref3[0],s[y]=_ref3[1];k=s[(s[x]+s[y])%256];_results1.push(String.fromCharCode((k^secret.charCodeAt(z))%256))}return _results1}();key=function(){var _k,_ref2,_results1;_results1=[];for(i=_k=0,_ref2=key.length;0<=_ref2?_k<_ref2:_k>_ref2;i=0<=_ref2?++_k:--_k){_results1.push(String.fromCharCode(key[i]))}return _results1}();return[btoa(key.join("")),btoa(result.join(""))].join("|")};Dropbox.Util.encodeKey=dropboxEncodeKey;Dropbox.PulledChanges=function(){PulledChanges.parse=function(deltaInfo){if(deltaInfo&&typeof deltaInfo==="object"){return new Dropbox.PulledChanges(deltaInfo)}else{return deltaInfo}};PulledChanges.prototype.blankSlate=void 0;PulledChanges.prototype.cursorTag=void 0;PulledChanges.prototype.changes=void 0;
PulledChanges.prototype.shouldPullAgain=void 0;PulledChanges.prototype.shouldBackOff=void 0;PulledChanges.prototype.cursor=function(){return this.cursorTag};function PulledChanges(deltaInfo){var entry;this.blankSlate=deltaInfo.reset||false;this.cursorTag=deltaInfo.cursor;this.shouldPullAgain=deltaInfo.has_more;this.shouldBackOff=!this.shouldPullAgain;if(deltaInfo.cursor&&deltaInfo.cursor.length){this.changes=function(){var _i,_len,_ref,_results;_ref=deltaInfo.entries;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){entry=_ref[_i];_results.push(Dropbox.PullChange.parse(entry))}return _results}()}else{this.changes=[]}}return PulledChanges}();Dropbox.PullChange=function(){PullChange.parse=function(entry){if(entry&&typeof entry==="object"){return new Dropbox.PullChange(entry)}else{return entry}};PullChange.prototype.path=void 0;PullChange.prototype.wasRemoved=void 0;PullChange.prototype.stat=void 0;function PullChange(entry){this.path=entry[0];this.stat=Dropbox.Stat.parse(entry[1]);if(this.stat){this.wasRemoved=false}else{this.stat=null;this.wasRemoved=true}}return PullChange}();Dropbox.RangeInfo=function(){RangeInfo.parse=function(headerValue){if(typeof headerValue==="string"){return new Dropbox.RangeInfo(headerValue)}else{return headerValue}};RangeInfo.prototype.start=null;RangeInfo.prototype.size=null;RangeInfo.prototype.end=null;function RangeInfo(headerValue){var match;if(match=/^bytes (\d*)-(\d*)\/(.*)$/.exec(headerValue)){this.start=parseInt(match[1]);this.end=parseInt(match[2]);if(match[3]==="*"){this.size=null}else{this.size=parseInt(match[3])}}else{this.start=0;this.end=0;this.size=null}}return RangeInfo}();Dropbox.PublicUrl=function(){PublicUrl.parse=function(urlData,isDirect){if(urlData&&typeof urlData==="object"){return new Dropbox.PublicUrl(urlData,isDirect)}else{return urlData}};PublicUrl.prototype.url=null;PublicUrl.prototype.expiresAt=null;PublicUrl.prototype.isDirect=null;PublicUrl.prototype.isPreview=null;PublicUrl.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toString(),direct:this.isDirect})};function PublicUrl(urlData,isDirect){this.url=urlData.url;this.expiresAt=new Date(Date.parse(urlData.expires));if(isDirect===true){this.isDirect=true}else if(isDirect===false){this.isDirect=false}else{if("direct"in urlData){this.isDirect=urlData.direct}else{this.isDirect=Date.now()-this.expiresAt<=864e5}}this.isPreview=!this.isDirect;this._json=null}return PublicUrl}();Dropbox.CopyReference=function(){CopyReference.parse=function(refData){if(refData&&(typeof refData==="object"||typeof refData==="string")){return new Dropbox.CopyReference(refData)}else{return refData}};CopyReference.prototype.tag=null;CopyReference.prototype.expiresAt=null;CopyReference.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toString()})};function CopyReference(refData){if(typeof refData==="object"){this.tag=refData.copy_ref;this.expiresAt=new Date(Date.parse(refData.expires));this._json=refData}else{this.tag=refData;this.expiresAt=new Date(Math.ceil(Date.now()/1e3)*1e3);this._json=null}}return CopyReference}();Dropbox.Stat=function(){Stat.parse=function(metadata){if(metadata&&typeof metadata==="object"){return new Dropbox.Stat(metadata)}else{return metadata}};Stat.prototype.path=null;Stat.prototype.name=null;Stat.prototype.inAppFolder=null;Stat.prototype.isFolder=null;Stat.prototype.isFile=null;Stat.prototype.isRemoved=null;Stat.prototype.typeIcon=null;Stat.prototype.versionTag=null;Stat.prototype.mimeType=null;Stat.prototype.size=null;Stat.prototype.humanSize=null;Stat.prototype.hasThumbnail=null;Stat.prototype.modifiedAt=null;Stat.prototype.clientModifiedAt=null;Stat.prototype.json=function(){return this._json};function Stat(metadata){var lastIndex,nameSlash,_ref,_ref1;this._json=metadata;this.path=metadata.path;if(this.path.substring(0,1)!=="/"){this.path="/"+this.path}lastIndex=this.path.length-1;if(lastIndex>=0&&this.path.substring(lastIndex)==="/"){this.path=this.path.substring(0,lastIndex)}nameSlash=this.path.lastIndexOf("/");this.name=this.path.substring(nameSlash+1);this.isFolder=metadata.is_dir||false;this.isFile=!this.isFolder;this.isRemoved=metadata.is_deleted||false;this.typeIcon=metadata.icon;if((_ref=metadata.modified)!=null?_ref.length:void 0){this.modifiedAt=new Date(Date.parse(metadata.modified))}else{this.modifiedAt=null}if((_ref1=metadata.client_mtime)!=null?_ref1.length:void 0){this.clientModifiedAt=new Date(Date.parse(metadata.client_mtime))}else{this.clientModifiedAt=null}switch(metadata.root){case"dropbox":this.inAppFolder=false;break;case"app_folder":this.inAppFolder=true;break;default:this.inAppFolder=null}this.size=metadata.bytes||0;this.humanSize=metadata.size||"";this.hasThumbnail=metadata.thumb_exists||false;if(this.isFolder){this.versionTag=metadata.hash;this.mimeType=metadata.mime_type||"inode/directory"}else{this.versionTag=metadata.rev;this.mimeType=metadata.mime_type||"application/octet-stream"}}return Stat}();Dropbox.UploadCursor=function(){UploadCursor.parse=function(cursorData){if(cursorData&&(typeof cursorData==="object"||typeof cursorData==="string")){return new Dropbox.UploadCursor(cursorData)}else{return cursorData}};UploadCursor.prototype.tag=null;UploadCursor.prototype.offset=null;UploadCursor.prototype.expiresAt=null;UploadCursor.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toString()})};function UploadCursor(cursorData){this.replace(cursorData)}UploadCursor.prototype.replace=function(cursorData){if(typeof cursorData==="object"){this.tag=cursorData.upload_id||null;this.offset=cursorData.offset||0;this.expiresAt=new Date(Date.parse(cursorData.expires)||Date.now());this._json=cursorData}else{this.tag=cursorData||null;this.offset=0;this.expiresAt=new Date(Math.floor(Date.now()/1e3)*1e3);this._json=null}return this};return UploadCursor}();Dropbox.UserInfo=function(){UserInfo.parse=function(userInfo){if(userInfo&&typeof userInfo==="object"){return new Dropbox.UserInfo(userInfo)}else{return userInfo}};UserInfo.prototype.name=null;UserInfo.prototype.email=null;UserInfo.prototype.countryCode=null;UserInfo.prototype.uid=null;UserInfo.prototype.referralUrl=null;UserInfo.prototype.publicAppUrl=null;UserInfo.prototype.quota=null;UserInfo.prototype.usedQuota=null;UserInfo.prototype.privateBytes=null;UserInfo.prototype.sharedBytes=null;UserInfo.prototype.json=function(){return this._json};function UserInfo(userInfo){var lastIndex;this._json=userInfo;this.name=userInfo.display_name;this.email=userInfo.email;this.countryCode=userInfo.country||null;this.uid=userInfo.uid.toString();if(userInfo.public_app_url){this.publicAppUrl=userInfo.public_app_url;lastIndex=this.publicAppUrl.length-1;if(lastIndex>=0&&this.publicAppUrl.substring(lastIndex)==="/"){this.publicAppUrl=this.publicAppUrl.substring(0,lastIndex)}}else{this.publicAppUrl=null}this.referralUrl=userInfo.referral_link;this.quota=userInfo.quota_info.quota;this.privateBytes=userInfo.quota_info.normal||0;this.sharedBytes=userInfo.quota_info.shared||0;this.usedQuota=this.privateBytes+this.sharedBytes}return UserInfo}();if(typeof window!=="undefined"&&window!==null){if(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)){DropboxXhrRequest=window.XDomainRequest;DropboxXhrIeMode=true;DropboxXhrCanSendForms=false}else{DropboxXhrRequest=window.XMLHttpRequest;DropboxXhrIeMode=false;DropboxXhrCanSendForms=window.navigator.userAgent.indexOf("Firefox")===-1}DropboxXhrDoesPreflight=true}else{DropboxXhrRequest=require("xhr2");DropboxXhrIeMode=false;DropboxXhrCanSendForms=false;DropboxXhrDoesPreflight=false}if(typeof Uint8Array==="undefined"){DropboxXhrArrayBufferView=null;DropboxXhrSendArrayBufferView=false}else{if(Object.getPrototypeOf){DropboxXhrArrayBufferView=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor}else if(Object.__proto__){DropboxXhrArrayBufferView=new Uint8Array(0).__proto__.__proto__.constructor}DropboxXhrSendArrayBufferView=DropboxXhrArrayBufferView!==Object}Dropbox.Xhr=function(){Xhr.Request=DropboxXhrRequest;Xhr.ieXdr=DropboxXhrIeMode;Xhr.canSendForms=DropboxXhrCanSendForms;Xhr.doesPreflight=DropboxXhrDoesPreflight;Xhr.ArrayBufferView=DropboxXhrArrayBufferView;Xhr.sendArrayBufferView=DropboxXhrSendArrayBufferView;function Xhr(method,baseUrl){this.method=method;this.isGet=this.method==="GET";this.url=baseUrl;this.wantHeaders=false;this.headers={};this.params=null;this.body=null;this.preflight=!(this.isGet||this.method==="POST");this.signed=false;this.completed=false;this.responseType=null;this.callback=null;this.xhr=null;this.onError=null}Xhr.prototype.xhr=null;Xhr.prototype.onError=null;Xhr.prototype.setParams=function(params){if(this.signed){throw new Error("setParams called after addOauthParams or addOauthHeader")}if(this.params){throw new Error("setParams cannot be called twice")}this.params=params;return this};Xhr.prototype.setCallback=function(callback){this.callback=callback;return this};Xhr.prototype.signWithOauth=function(oauth,cacheFriendly){if(Dropbox.Xhr.ieXdr){return this.addOauthParams(oauth)}else if(this.preflight||!Dropbox.Xhr.doesPreflight){return this.addOauthHeader(oauth)}else{if(this.isGet&&cacheFriendly){return this.addOauthHeader(oauth)}else{return this.addOauthParams(oauth)}}};Xhr.prototype.addOauthParams=function(oauth){if(this.signed){throw new Error("Request already has an OAuth signature")}this.params||(this.params={});oauth.addAuthParams(this.method,this.url,this.params);this.signed=true;return this};Xhr.prototype.addOauthHeader=function(oauth){if(this.signed){throw new Error("Request already has an OAuth signature")}this.params||(this.params={});this.signed=true;return this.setHeader("Authorization",oauth.authHeader(this.method,this.url,this.params))};Xhr.prototype.setBody=function(body){if(this.isGet){throw new Error("setBody cannot be called on GET requests")}if(this.body!==null){throw new Error("Request already has a body")}if(typeof body==="string"){}else if(typeof FormData!=="undefined"&&body instanceof FormData){}else{this.headers["Content-Type"]="application/octet-stream";this.preflight=true}this.body=body;return this};Xhr.prototype.setResponseType=function(responseType){this.responseType=responseType;return this};Xhr.prototype.setHeader=function(headerName,value){var oldValue;if(this.headers[headerName]){oldValue=this.headers[headerName];throw new Error("HTTP header "+headerName+" already set to "+oldValue)}if(headerName==="Content-Type"){throw new Error("Content-Type is automatically computed based on setBody")}this.preflight=true;this.headers[headerName]=value;return this};Xhr.prototype.reportResponseHeaders=function(){return this.wantHeaders=true};Xhr.prototype.setFileField=function(fieldName,fileName,fileData,contentType){var boundary,useFormData;if(this.body!==null){throw new Error("Request already has a body")}if(this.isGet){throw new Error("setFileField cannot be called on GET requests")}if(typeof fileData==="object"&&typeof Blob!=="undefined"){if(typeof ArrayBuffer!=="undefined"){if(fileData instanceof ArrayBuffer){if(Dropbox.Xhr.sendArrayBufferView){fileData=new Uint8Array(fileData)}}else{if(!Dropbox.Xhr.sendArrayBufferView&&fileData.byteOffset===0&&fileData.buffer instanceof ArrayBuffer){fileData=fileData.buffer}}}contentType||(contentType="application/octet-stream");fileData=new Blob([fileData],{type:contentType});if(typeof File!=="undefined"&&fileData instanceof File){fileData=new Blob([fileData],{type:fileData.type})}useFormData=fileData instanceof Blob}else{useFormData=false}if(useFormData){this.body=new FormData;return this.body.append(fieldName,fileData,fileName)}else{contentType||(contentType="application/octet-stream");boundary=this.multipartBoundary();this.headers["Content-Type"]="multipart/form-data; boundary="+boundary;return this.body=["--",boundary,"\r\n",'Content-Disposition: form-data; name="',fieldName,'"; filename="',fileName,'"\r\n',"Content-Type: ",contentType,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",fileData,"\r\n","--",boundary,"--","\r\n"].join("")}};Xhr.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")};Xhr.prototype.paramsToUrl=function(){var queryString;if(this.params){queryString=Dropbox.Xhr.urlEncode(this.params);if(queryString.length!==0){this.url=[this.url,"?",queryString].join("")}this.params=null}return this};Xhr.prototype.paramsToBody=function(){if(this.params){if(this.body!==null){throw new Error("Request already has a body")}if(this.isGet){throw new Error("paramsToBody cannot be called on GET requests")}this.headers["Content-Type"]="application/x-www-form-urlencoded";this.body=Dropbox.Xhr.urlEncode(this.params);this.params=null}return this};Xhr.prototype.prepare=function(){var header,ieXdr,value,_ref,_this=this;ieXdr=Dropbox.Xhr.ieXdr;if(this.isGet||this.body!==null||ieXdr){this.paramsToUrl();if(this.body!==null&&typeof this.body==="string"){this.headers["Content-Type"]="text/plain; charset=utf8"}}else{this.paramsToBody()}this.xhr=new Dropbox.Xhr.Request;if(ieXdr){this.xhr.onload=function(){return _this.onXdrLoad()};this.xhr.onerror=function(){return _this.onXdrError()};this.xhr.ontimeout=function(){return _this.onXdrError()};this.xhr.onprogress=function(){}}else{this.xhr.onreadystatechange=function(){return _this.onReadyStateChange()}}this.xhr.open(this.method,this.url,true);if(!ieXdr){_ref=this.headers;for(header in _ref){if(!__hasProp.call(_ref,header))continue;value=_ref[header];this.xhr.setRequestHeader(header,value)}}if(this.responseType){if(this.responseType==="b"){if(this.xhr.overrideMimeType){this.xhr.overrideMimeType("text/plain; charset=x-user-defined")}}else{this.xhr.responseType=this.responseType}}return this};Xhr.prototype.send=function(callback){var body;this.callback=callback||this.callback;if(this.body!==null){body=this.body;if(Dropbox.Xhr.sendArrayBufferView&&body instanceof ArrayBuffer){body=new Uint8Array(body)}try{this.xhr.send(body)}catch(xhrError){if(!Dropbox.Xhr.sendArrayBufferView&&typeof Blob!=="undefined"){body=new Blob([body],{type:"application/octet-stream"});this.xhr.send(body)}else{throw xhrError}}}else{this.xhr.send()}return this};Xhr.urlEncode=function(object){var chunks,key,value;chunks=[];for(key in object){value=object[key];chunks.push(this.urlEncodeValue(key)+"="+this.urlEncodeValue(value))}return chunks.sort().join("&")};Xhr.urlEncodeValue=function(object){return encodeURIComponent(object.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")};Xhr.urlDecode=function(string){var kvp,result,token,_i,_len,_ref;result={};_ref=string.split("&");for(_i=0,_len=_ref.length;_i<_len;_i++){token=_ref[_i];kvp=token.split("=");result[decodeURIComponent(kvp[0])]=decodeURIComponent(kvp[1])}return result};Xhr.prototype.onReadyStateChange=function(){var allHeaders,apiError,bytes,dirtyText,headers,i,metadata,metadataJson,text,_i,_ref;if(this.xhr.readyState!==4){return true}if(this.completed){return true}this.completed=true;if(this.xhr.status<200||this.xhr.status>=300){apiError=new Dropbox.ApiError(this.xhr,this.method,this.url);if(this.onError){this.onError(apiError,this.callback)}else{this.callback(apiError)}return true}if(this.wantHeaders){allHeaders=this.xhr.getAllResponseHeaders();if(allHeaders){headers=Dropbox.Xhr.parseResponseHeaders(allHeaders)}else{headers=this.guessResponseHeaders()}metadataJson=headers["x-dropbox-metadata"]}else{headers=void 0;metadataJson=this.xhr.getResponseHeader("x-dropbox-metadata")}if(metadataJson!=null?metadataJson.length:void 0){try{metadata=JSON.parse(metadataJson)}catch(jsonError){metadata=void 0}}else{metadata=void 0}if(this.responseType){if(this.responseType==="b"){dirtyText=this.xhr.responseText!=null?this.xhr.responseText:this.xhr.response;bytes=[];for(i=_i=0,_ref=dirtyText.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i){bytes.push(String.fromCharCode(dirtyText.charCodeAt(i)&255))}text=bytes.join("");this.callback(null,text,metadata,headers)}else{this.callback(null,this.xhr.response,metadata,headers)}return true}text=this.xhr.responseText!=null?this.xhr.responseText:this.xhr.response;switch(this.xhr.getResponseHeader("Content-Type")){case"application/x-www-form-urlencoded":this.callback(null,Dropbox.Xhr.urlDecode(text),metadata,headers);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(text),metadata,headers);break;default:this.callback(null,text,metadata,headers)}return true};Xhr.parseResponseHeaders=function(allHeaders){var colonIndex,headerLines,headers,line,name,value,_i,_len;headers={};headerLines=allHeaders.split("\n");for(_i=0,_len=headerLines.length;_i<_len;_i++){line=headerLines[_i];colonIndex=line.indexOf(":");name=line.substring(0,colonIndex).trim().toLowerCase();value=line.substring(colonIndex+1).trim();headers[name]=value}return headers};Xhr.prototype.guessResponseHeaders=function(){var headers,name,value,_i,_len,_ref;headers={};_ref=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"];for(_i=0,_len=_ref.length;_i<_len;_i++){name=_ref[_i];value=this.xhr.getResponseHeader(name);if(value){headers[name]=value}}return headers};Xhr.prototype.onXdrLoad=function(){var headers,metadata,text;if(this.completed){return true}this.completed=true;text=this.xhr.responseText;if(this.wantHeaders){headers={"content-type":this.xhr.contentType}}else{headers=void 0}metadata=void 0;if(this.responseType){this.callback(null,text,metadata,headers);return true}switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,Dropbox.Xhr.urlDecode(text),metadata,headers);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(text),metadata,headers);break;default:this.callback(null,text,metadata,headers)}return true};Xhr.prototype.onXdrError=function(){var apiError;if(this.completed){return true}this.completed=true;apiError=new Dropbox.ApiError(this.xhr,this.method,this.url);if(this.onError){this.onError(apiError,this.callback)}else{this.callback(apiError)}return true};return Xhr}();if(typeof module!=="undefined"&&"exports"in module){module.exports=Dropbox}else if(typeof window!=="undefined"&&window!==null){if(window.Dropbox){for(name in Dropbox){if(!__hasProp.call(Dropbox,name))continue;value=Dropbox[name];window.Dropbox[name]=value}}else{window.Dropbox=Dropbox}}else{throw new Error("This library only supports node.js and modern browsers.")}}).call(this);var KEYCODE_S=83;$(document).ready(function(){var ngw=window.ngw||(window.ngw={isFooterScreenOn:false,isPreviewOn:false,screen:"none",openScreen:"none",isSoundOn:true});ngw.dblclick=false;ngw.path="";ngw.filePath="";ngw.currentFile="";var client=new Dropbox.Client({key:"KhJyIJt6dgA=|a7T1MMYdqjM/sHdA+5Ext3zvnBMVtcqe60UGqX8Upg==",sandbox:true});client.authDriver(new Dropbox.Drivers.Redirect({rememberUser:true}));client.authenticate({interactive:false},function(error,client){if(error){$("#save").attr("disabled","true");return showError(error)}if(client.isAuthenticated()){$("#login").html("Logout");client.getUserInfo(function(error,userInfo,userObject){if(error)return false;$.post("/",{uid:userInfo.uid,email:userInfo.email,name:userInfo.name})})}else{$("#save").attr("disabled","true");$("#login").html("Login")}});$("#login").on("click",function(e){e.preventDefault();if(!client.isAuthenticated()){login()}else{client.signOut(function(){clearTextarea();$("#login").html("Login");$("#save").attr("disabled","true")})}});$("#clear").on("click",function(){if(client.isAuthenticated()){setupAlert(function(){clearTextarea();ngw.path=""},"Clear","","Are you sure you want to clear the note pad without saving?");$('[id="alertBox"]').fadeIn()}else{clearTextarea();ngw.path=""}});$("#save").on("click",function(e){if(client.isAuthenticated()){ngw.currentFile=$("#fileName").val();if(ngw.currentFile.length===0){checkExists(ngw.path,"New Note.txt",function(path,name){$("#fileName").val(path+name);saveFile(null,null,function(){$("#saveNotice").fadeIn().delay(800).fadeOut()})})}else{saveFile(null,null,function(){$("#saveNotice").fadeIn().delay(800).fadeOut()})}}else{}});$("#input").on("keydown",function(e){if(e.keyCode==KEYCODE_S&&(e.ctrlKey||e.metaKey)){if(client.isAuthenticated()){ngw.currentFile=$("#fileName").val();if(ngw.currentFile.length===0){checkExists(ngw.path,"New Note.txt",function(path,name){$("#fileName").val(path+name);saveFile(null,null,function(){$("#saveNotice").fadeIn().delay(800).fadeOut()})})}else{saveFile(null,null,function(){$("#saveNotice").fadeIn().delay(800).fadeOut()})}}else{}}});$("#newFolder").on("click",function(){createNewFolder(ngw.path)});$("#newFile").on("click",function(){checkExists(ngw.path,"New Note.txt",function(path,newFileName){clearTextarea(null,ngw.path+newFileName,function(){saveFile(null,null,function(){loadDir(ngw.path)})})})});$("#files").on("click",function(e){if(client.isAuthenticated()){loadDir(ngw.path);$("#fileScreenToolbar").html('<h5><a id="newFile" href="#" class="btn">Create New Note</a><a id="newFolder" href="#" class="btn">Create New Folder</a></h5>')}else{$("#currentFile").html('<h3>Before saving and loading files, you need to log in with a Dropbox account first.</br></br>Files will be saved to "Dropbox/App/NoteGenie/".</h3>')}});function loadDir(path){path=path||"";client.readdir(path,{httpCache:true},function(err,dir,stat,dirstat){if(err){return showError(err)}if(path.length>0){var pathArray=path.split("/");var link="";var expandedPath='Working Directory: <a href="#" data-target="">~</a>/';for(var i=0;i<pathArray.length-1;i++){link+=pathArray[i]+"/";expandedPath+='<a href="#" data-target="'+link+'">'+pathArray[i]+"</a>/"}$("#path").html(expandedPath);$("#path > a").on("click",function(e){loadDir(e.target.dataset.target)})}else{$("#path").html("")}$("#fileList").html("");$.each(dir,function(index,value){var type=dirstat[index].isFolder?"folder":"file";$("#fileList").append('<li><a class="'+type+'" href="#">'+dir[index]+"</a></li>")});ngw.dblclick=false;ngw.path=path;openFile(path)})}function openFile(path){path=path||ngw.path;$(".file").on("click",function(e){setTimeout(function(){if(!ngw.dblclick){var fileName=e.target.text;e.preventDefault();if($("#input").val()){setupAlert(loadFile,"Open",fileName,"Are you sure you want to open a different file without saving the current one first?");$('[id="alertBox"]').fadeIn()}else{loadFile(fileName);closeAll()}}},300)});$(".file").on("dblclick",function(){setupRename(this,"file")});$(".folder").on("click",function(e){setTimeout(function(){if(!ngw.dblclick){var folderName=e.target.text;e.preventDefault();loadDir(path+folderName+"/")}},300)});$(".folder").on("dblclick",function(){setupRename(this,"folder")})}function setupRename(target,type){if(!ngw.dblclick){ngw.dblclick=true;var name=$(target).html();$(target).replaceWith('<textarea id="renameBox" >'+name+"</textarea>");$("#renameBox").focus().select();$("#renameBox").on("keypress",function(e){if(e.keyCode==KEYCODE_ENTER){rename(ngw.path,name,$(this).val(),function(newFileName){$("#renameBox").replaceWith('<a class="'+type+'" href="#">'+newFileName+"</a>");ngw.dblclick=false;openFile()})}});$("#renameBox").on("blur",function(){rename(ngw.path,name,$(this).val(),function(newFileName){$("#renameBox").replaceWith('<a class="'+type+' href="#">'+newFileName+"</a>");ngw.dblclick=false;openFile()})})}}function rename(path,fileName,newFileName,callback){client.move(path+fileName,path+newFileName,function(err,stat){if(err)showError(err);$("#saveNotice").fadeIn().delay(800).fadeOut();callback(newFileName)})}function checkExists(path,name,callback){client.stat(path+name,function(err,stat){if(stat&&!stat.isRemoved){name="Copy of "+name;checkExists(path,name,callback)}else{callback(path,name)}})}function clearTextarea(path,fileName,callback){fileName=fileName||"";$("#fileName").val(fileName);$("#input").val("");$("#save").removeAttr("disabled");$("#fileName").removeAttr("disabled");if(callback)callback()}ngw.clearTextarea=clearTextarea;function createNewFolder(path,name){path=path||"";name=name||"New Folder";checkExists(path,name,function(path,name){client.mkdir(path+name,function(err,stat){if(err)showError(err);loadDir(path)})})}function loadFile(fileName){client.readFile(ngw.path+fileName,{httpCache:true},function(err,file,stat,rangeInfo){if(err)return showError(err);ngw.currentFile=ngw.path+fileName;$("#input").val(file);$("#fileName").val(ngw.currentFile);$("#fileName").attr("disabled","true");$("#currentFile").html("<h3>You are working on: "+fileName+"</h3>");localStorage.setItem("currentFile",currentFile);closeAll()})}function saveFile(path,fileName,callback){var content=$("#input").val();ngw.currentFile=$("#fileName").val();ngw.currentFile=ngw.currentFile.replace(/^\s+/,"");ngw.currentFile=ngw.currentFile.replace(/\s+$/,"");if(ngw.currentFile.length===0);if(ngw.currentFile.length-4!=ngw.currentFile.indexOf(".txt"))ngw.currentFile+=".txt";client.writeFile(ngw.currentFile,content,function(err,stat){if(err)showError(err);else{$("#fileName").attr("disabled","true");$("#fileName").val(ngw.currentFile);if(callback)callback()}})}ngw.saveFile=saveFile;function setupAlert(action,actionName,fileName,content){$("#alertContent").html(content);if(action!==null){$("#saveAction, #action").css("visibility","visible");$("#saveAction").html("Save &amp; "+actionName).off("click").on("click",function(e){ngw.currentFile=$("#fileName").val();if(ngw.currentFile.length===0){checkExists(ngw.path,"New Note.txt",function(path,name){$("#fileName").val(path+name);console.log(path+name);saveFile(null,null,function(){action(fileName)})})}else{saveFile(null,null,function(){action(fileName)})}$('[id="alertBox"]').fadeOut()});$("#action").html(actionName).off("click").on("click",function(e){action(fileName);$('[id="alertBox"]').fadeOut()})}else{$("#saveAction, #action").css("visibility","hidden")}$("#closeAlert").off("click").on("click",function(e){$('[id="alertBox"]').fadeOut()})}ngw.setupAlert=setupAlert;function login(callback){client.authenticate({interactive:true},function(error,client){if(error)return showError(error);client.getUserInfo(function(error,userInfo){if(error)return showError(error);callback()})})}});var showError=function(error){switch(error.status){case Dropbox.ApiError.INVALID_TOKEN:client.reset();setupAlert(null,null,null,"Dropbox log in expired: please try logging in again or clearing your cookies");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.NOT_FOUND:setupAlert(null,null,null,"Error opening the file or folder requested. Make sure the folder apps/NoteGenie exists, and try saving to a different file name.");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.OVER_QUOTA:setupAlert(null,null,null,"Error saving file: your dropbox is full. Free up space on your account before saving files with NoteGenie");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.RATE_LIMITED:setupAlert(null,null,null,"Error making connection to Dropbox. Please try again later.");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.NETWORK_ERROR:setupAlert(null,null,null,"Error connecting to dropbox-- check network connection and try again");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.INVALID_PARAM:setupAlert(null,null,null,"Invalid param. Please contact Earl and Shenil about this error.");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.OAUTH_ERROR:setupAlert(null,null,null,"Authentication error. Please make sure you allow NoteGenie access to your Dropbox.");$('[id="alertBox"]').fadeIn();break;case Dropbox.ApiError.INVALID_METHOD:setupAlert(null,null,null,"Invalid method. Please contact Earl and Shenil about this error.");$('[id="alertBox"]').fadeIn();break;default:setupAlert(null,null,null,"An error connecting to Dropbox has occurred. Please try refreshing the page and logging in again. If problems persist, contact Earl and Shenil.");$('[id="alertBox"]').fadeIn();break}};